{"Buffer":"\u003Cscript\u003E\n  import {onMount} from \u0027svelte\u0027;\n  let count = 0;\n  onMount(() =\u003E {\n    const interval = setInterval(() =\u003E count\u002B\u002B, 1000);\n    return () =\u003E {\n      clearInterval(interval);\n    };\n  });\n\u003C/script\u003E\n\n\u003Cstyle\u003E\n  :global(body) {\n    margin: 0;\n    font-family: Arial, Helvetica, sans-serif;\n  }\n  .App {\n    text-align: center;\n  }\n  .App code {\n    background: #0002;\n    padding: 4px 8px;\n    border-radius: 4px;\n  }\n  .App p {\n    margin: 0.4rem;\n  }\n\n  .App-header {\n    background-color: #f9f6f6;\n    color: #333;\n    min-height: 100vh;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    font-size: calc(10px \u002B 2vmin);\n  }\n  .App-link {\n    color: #ff3e00;\n  }\n  .App-logo {\n    height: 36vmin;\n    pointer-events: none;\n    margin-bottom: 3rem;\n    animation: App-logo-spin infinite 1.6s ease-in-out alternate;\n  }\n  @keyframes App-logo-spin {\n    from {\n      transform: scale(1);\n    }\n    to {\n      transform: scale(1.06);\n    }\n  }\n\u003C/style\u003E\n\n\u003Cdiv class=\u0022App\u0022\u003E\n  \u003Cheader class=\u0022App-header\u0022\u003E\n    \u003Cimg src=\u0022/logo.svg\u0022 class=\u0022App-logo\u0022 alt=\u0022logo\u0022 /\u003E\n    \u003Cp\u003EEdit \u003Ccode\u003Esrc/App.svelte\u003C/code\u003E and save to reload.\u003C/p\u003E\n    \u003Cp\u003EPage has been open for \u003Ccode\u003E{count}\u003C/code\u003E seconds.\u003C/p\u003E\n    \u003Cp\u003E\n      \u003Ca class=\u0022App-link\u0022 href=\u0022https://svelte.dev\u0022 target=\u0022_blank\u0022 rel=\u0022noopener noreferrer\u0022\u003E\n        Learn Svelte\n      \u003C/a\u003E\n    \u003C/p\u003E\n  \u003C/header\u003E\n\u003C/div\u003E\n lang=\u0022ts\u0022\u003Cscript\u003E\n\timport {onMount} from \u0027svelte\u0027;\n\tlet count: number = 0;\n\tonMount(() =\u003E {\n\t  const interval = setInterval(() =\u003E count\u002B\u002B, 1000);\n\t  return () =\u003E {\n\t\tclearInterval(interval);\n\t  };\n\t});\n  \u003C/script\u003E\n  \n  \u003Cstyle\u003E\n\t:global(body) {\n\t  margin: 0;\n\t  font-family: Arial, Helvetica, sans-serif;\n\t}\n\t.App {\n\t  text-align: center;\n\t}\n\t.App code {\n\t  background: #0002;\n\t  padding: 4px 8px;\n\t  border-radius: 4px;\n\t}\n\t.App p {\n\t  margin: 0.4rem;\n\t}\n  \n\t.App-header {\n\t  background-color: #f9f6f6;\n\t  color: #333;\n\t  min-height: 100vh;\n\t  display: flex;\n\t  flex-direction: column;\n\t  align-items: center;\n\t  justify-content: center;\n\t  font-size: calc(10px \u002B 2vmin);\n\t}\n\t.App-link {\n\t  color: #ff3e00;\n\t}\n\t.App-logo {\n\t  height: 36vmin;\n\t  pointer-events: none;\n\t  margin-bottom: 3rem;\n\t  animation: App-logo-spin infinite 1.6s ease-in-out alternate;\n\t}\n\t@keyframes App-logo-spin {\n\t  from {\n\t\ttransform: scale(1);\n\t  }\n\t  to {\n\t\ttransform: scale(1.06);\n\t  }\n\t}\n  \u003C/style\u003E\n  \n  \u003Cdiv class=\u0022App\u0022\u003E\n\t\u003Cheader class=\u0022App-header\u0022\u003E\n\t  \u003Cimg src=\u0022/logo.svg\u0022 class=\u0022App-logo\u0022 alt=\u0022logo\u0022 /\u003E\n\t  \u003Cp\u003EEdit \u003Ccode\u003Esrc/App.svelte\u003C/code\u003E and save to reload.\u003C/p\u003E\n\t  \u003Cp\u003EPage has been open for \u003Ccode\u003E{count}\u003C/code\u003E seconds.\u003C/p\u003E\n\t  \u003Cp\u003E\n\t\t\u003Ca class=\u0022App-link\u0022 href=\u0022https://svelte.dev\u0022 target=\u0022_blank\u0022 rel=\u0022noopener noreferrer\u0022\u003E\n\t\t  Learn Svelte\n\t\t\u003C/a\u003E\n\t  \u003C/p\u003E\n\t\u003C/header\u003E\n  \u003C/div\u003E\n    lang=\u0022ts\u0022\u003Cscript\u003E\n\texport let name;\n\u003C/script\u003E\n\n\u003Cmain\u003E\n\t\u003Ch1\u003EHello {name}!\u003C/h1\u003E\n\t\u003Cp\u003EVisit the \u003Ca href=\u0022https://svelte.dev/tutorial\u0022\u003ESvelte tutorial\u003C/a\u003E to learn how to build Svelte apps.\u003C/p\u003E\n\u003C/main\u003E\n\n\u003Cstyle\u003E\n\tmain {\n\t\ttext-align: center;\n\t\tpadding: 1em;\n\t\tmax-width: 240px;\n\t\tmargin: 0 auto;\n\t}\n\n\th1 {\n\t\tcolor: #ff3e00;\n\t\ttext-transform: uppercase;\n\t\tfont-size: 4em;\n\t\tfont-weight: 100;\n\t}\n\n\t@media (min-width: 640px) {\n\t\tmain {\n\t\t\tmax-width: none;\n\t\t}\n\t}\n\u003C/style\u003E\n\t\texport let name;\nstate\u003Cp\u003E{JSONJSON.stringify\nimport { stringify } from \u0022querystring\u0022;\nstringify(state)}\u003C/p\u003Erere\n\texport let state;\n\texport let state;\n\texport let state;roomconnectedvalue// \texport let value\n\texport let value\n\texport let value\nplayersroundssecs_per_round\texport let secs_per_round\nond_active_sessions\n\t\u003Ch1\u003ERoom {room}\u003C/h1\u003E connected {connected}\n\texport let connectedstate\texport let connected\n state {state}connectionconnection *//* \n\t\n\t\tbod y {\n\t\t\n\t\t\t}\t\tbackground-color: black;\n\t\u003Ch1\u003EGlass Bead Games\u003C/h1\u003E Timer44hh:\u003Cem\u003E\u003C/em\u003E\n\t\u003Cspadiv\u003E connected {connection} state {state}\u003C/di\u003Ev\u003E/\n\t\n\t\u003Cdiv id=bar\u003Cdiv id=config\u0027\u0027\u003E\u003C/div\u003E\n\t\t\n\t\u003Ch2\u003EConfig\u003C/h2\u003E\n#config {\n\t\n\t}\tmmargin-top: 12em;\n\t\t\u003Cubutton on:clion:click=\u0022\u0022{}start\u003EStart\u003C//button\u003E\n\nconst start = () =\u003E {\n\t\n\t}\tconsoleconsole.loglog(\u0027start!\u0027)\n\t\n\tconst update_state=  = (patch) patch =\u003E {\n\t\n\t}\tfetch(async await await {\n\t\tmethd: method: \u0027POST\u0027,\n\t\tmdeode: \u0027sasame-origin\u0027,\n\t\theaders: {\n\t\t\t\u0027content-type\u0027,: \u0027application/json\u0027,\n\t\t\t\t\t},\n\t\tbdody: JSONJSON.stringifhystringify(patch)\n\t\t\t}\u0027/\u0060${room}/configure\u0060, )\n\tupdaupdate_state({state: \u0027playing\u0027}) = null\n\t\n\t\t{#ififif#iif }\n\t\t\t\n\t\t{/ifstate == \u0027waiting\u0027\n\t\t{/if\t}\n\t\t\t{#elelelse}\t\t#elif:else if state == \u0027playing\u0027\t\t\t\u003Cbutton on:click={start}\u003EStart\u003C/button\u003E\n\t\t\t{:else if state == \u0027playing\u0027}\n\t\t() =\u003E update_state({state: \u0027playing\u0027})// // // // update_state({state: \u0027playing\u0027})() =\u003E pausedPause\t\t{:else if state == \u0027playing\u0027}\n\t\t{:else if state == \u0027playing\u0027}\n\t\t\t\u003Cbutton on:click={() =\u003E update_state({state: \u0027paused\u0027})}\u003EPause\u003C/button\u003E\npausedresumeplayingResume\n\t\t\n\t\t\u003Clabel\u003ENumber of players\u003Cinput type=numb\u0027er\u0027\u003E\u003C/l/label\u003E\u003E\u003Cdiv\u003E\u003C/div\u003E\n\t\t\t\n\t\t\t\u003C/div\u003E\t\t valubind:on:inpon:input=\u0022\u0022\n\nconst patch = upd = (patch \u003E  =\u003E () =\u003E updateupdate_state(patch)uuupppddd{updupd((k\nimport { kMaxLength } from \u0022buffer\u0022\nkMaxLength, v)k, v){[k]: v}\u0027\u0027\u0027\u0027\u0027\u0027,,, on:input={}()\nconst config = k =\u003E (e)e =\u003E {\n\t\n\t}\tconsoleconsole.loglog(\u0027k\u0027, k, e)configconfig(\u0027playiners\u0027)\n\t\t\t\t\n\t\t\t.valuedata\n\tupdaupdate_state(k, {[k]: e.data}) value={players} --\u003E\u003C!-- \t\t\t\t\u003C!-- \u003Cinput type=\u0027number\u0027 value={players} on:input={config(\u0027players\u0027)}\u003E --\u003E\nrange moinin=1 max=12e, , e.dvaluesubmit --\u003E\u003C!--  min=1 max=12// submitblur\t\t\u003Cdiv\u003E\n\t\t\t\u003Clabel\u003ENumber of players\n\t\t\t\t\u003Cinput type=\u0027number\u0027 value={players} on:blur={config(\u0027players\u0027)} min=1 max=12\u003E\n\t\t\t\t\u003C!-- \u003Cinput type=\u0027range\u0027 value={players} on:submit={config(\u0027players\u0027)} min=1 max=12\u003E --\u003E\n\t\t\t\u003C/label\u003E\n\t\t\u003C/div\u003E\n\n\t\trroundsrroouunnddssiinnppuutt, e.target.valuetarget.value min=1 max=12, e.target.type\n\tconst value = e.target.type === \u0027number\u0027 ? e.target.value|0 : e.target.value\n\tconst raw\u002B_value = e.target.valuerraaww__vvaalluueevalue\n\t\n\t\u003Cdiv id=rounds\u003E\u0027\u0027\n\t\t\u003C/div\t\u003C/div\u003E\n\t\t{#f\n\ncontst rounds = new ArrayArray(let_arrrounds).fillfill().map.fillfill()each round_arr as _, i}\n\t\t\n\t\t{/eaeach}\t\t\t\u003Cdiv\u003ERound {i}\u003C/div\u003EMath.minaxmax(, 0)\n$::$$: round_round_arr\u002B1:\n\t\t\t\t\n\t\t\tArrayArray(rounds)// // Math.maxmax(, 0)\t\t\t\t{#each Array(Math.max(rounds, 0)) as _, i}players\n\t\t\t\t\u003C{/each\u003E}\n\t\t\t\t\t\u003Cspan\u003E\u003C/span\u003E{rrpp\u002B1}  \nlabel {\n\t\n\t}\tdisplay: block;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\n\t\t\n\t\t\u003Clabel\u003ENumber of players\n\t\t\t\u003Cinput type=\u0027number\u0027 value={players} on:input={config(\u0027players\u0027)} min=1 max=12 \u003E\n\t\t\t\u003C!-- \u003Cinput type=\u0027range\u0027 value={players} on:submit={config(\u0027players\u0027)} min=1 max=12\u003E --\u003E\n\t\t\u003C/label\u003E\n\t\tMeditate before game start1 minute maionscheckbox\u0027\u0027\n\texport let playersmeditatemeditatemeditate \n\t\t\n\t\t: e.target.type === \u0027checkbox\u0027 ? e.target.checked\n\t\t\u003Ch2\u003EGame structure\u003C/h2\u003E\n\t\t{if medimeditate}\n\t\t\t\u003Cdiv\u003EMeditation\u003C/div\u003E\n\t\t\t\u003C[{/if}\t\t#\n\t\n\t\u003Cdiv\u003E id=progress\u0027\u0027\u003C/dic\u003Ev\u003E\n\n#progress {\n\t\n\t}\twidth: 100%;\n\theight: 3em:;\n\tborder: 1px solid white;\n\tmargin: 10px;paddingcalc( - 20px)margin\n\tborder: 1px solid white;\n\theight: 3em;5254em52containerprogresscontainer\n\t\t\n\t\u003Cdiv id=\u0027progress\u0027\u003C/div\u003E\u003E style=\u0022{}{}width: 50%\u0027\u0027\n\n#progress {\n\t\n\t} *//* \twidth: borderbackground-color: white;\n\twidth: 50%;\n\tbackground-color: white;\n\theight: 100%; *//* :==\u0027: \nconst width = 50{width}let\nsetInsetInterval(() =\u003E width\u002B\u002B, 1000)\nlet width = 50\nsetInterval(() =\u003E width\u002B\u002B, 1000)// \texport let rounds\nrounbead_bead\t\t\u003Clabel\u003ENumber of rounds\n\t\t\t\u003Cinput type=\u0027number\u0027 value={rounds} on:input={config(\u0027rounds\u0027)} min=1 max=12\u003E\n\t\t\t\u003C!-- \u003Cinput type=\u0027range\u0027 value={players} on:submit={config(\u0027players\u0027)} min=1 max=12\u003E --\u003E\n\t\t\u003C/label\u003E\n\n\t\tSeconsds per bead20seconseconds_per_beadseconds_per_bead (1 min)\t\u003Cdiv\u003E{connection} / {state}\u003C/div\u003E\n__acti_active_sessions sesplayers in room()\n\texport let meditatearchetopic\n\t\u003Ch4\u003ERoom: \u003Cem\u003E{room}\u003C/em\u003E\u003C/h4\u003ETopicarchiarchetopic\n\t\t\u003Clabel\u003E1 minute meditation before game starts\n\t\t\t\u003Cinput type=\u0027checkbox\u0027 value={meditate} on:input={config(\u0027meditate\u0027)} \u003E\n\t\t\t\u003C!-- \u003Cinput type=\u0027range\u0027 value={players} on:submit={config(\u0027players\u0027)} min=1 max=12\u003E --\u003E\n\t\t\u003C/label\u003E\n\t\ttextarch\nimport { arch } from \u0022os\u0022;\n\narchetarchetopicarchetpopicArchetopic\n\t\n\tconst ARCHETOPICS = [\n  \u0027Truth\u0027, \u0027Human\u0027, \u0027Energy\u0027, \u0027Beauty\u0027, \u0027Beginning\u0027, \u0027End\u0027, \u0027Birth\u0027, \u0027Death\u0027,\n  \u0027Ego\u0027, \u0027Attention\u0027, \u0027Art\u0027, \u0027Empathy\u0027, \u0027Eutopia\u0027, \u0027Future\u0027, \u0027Game\u0027, \u0027Gift\u0027,\n  \u0027History\u0027, \u0027Cosmos\u0027, \u0027Time\u0027, \u0027Life\u0027, \u0027Addiction\u0027, \u0027Paradox\u0027, \u0027Shadow\u0027, \u0027Society\u0027\n]\n\t\n\t\t\t\u003Cdatalist id=archetopcisics\u0027\u0027\u003E\u003C/datalist\u003E\n\t\t\t\t\n\t\t\t\u003Cop{#each ARCHARCHETOPICS as topic}\n\t\t\t\t\t\u003Coption value={topic}/?\u003E\n\t\t\t\t\t\t{/each\u003E}\t\t\t\t\t\t\t\t\t list=archarchetopics\u0027\u0027\n\t\t\u003Cdiv\u003E\u003C/div\u003E\n\t\t\t\n\t\tTotal game length (includin: ${{rounds * players *  \u002B ((meditmeditate ? 1 : 0))( * secondseconds_per_bead / 60} minutes\n\nconst round_to  = (ishx =\u003E x * 100Math.roundround(() / 20100\nroundishroundish()\n\t\n\t\t\n\t\t\t\t\u003Cdiv\u003E\n\t\t\tTotal game length: {roundish((rounds * players \u002B (meditate ? 1 : 0)) * seconds_per_bead / 60)} minutes\n\t\t\u003C/div\u003E\n\t\t() checkedT\nconst ARCHETOPICS = [\n  \u0027Truth\u0027, \u0027Human\u0027, \u0027Energy\u0027, \u0027Beauty\u0027, \u0027Beginning\u0027, \u0027End\u0027, \u0027Birth\u0027, \u0027Death\u0027,\n  \u0027Ego\u0027, \u0027Attention\u0027, \u0027Art\u0027, \u0027Empathy\u0027, \u0027Eutopia\u0027, \u0027Future\u0027, \u0027Game\u0027, \u0027Gift\u0027,\n  \u0027History\u0027, \u0027Cosmos\u0027, \u0027Time\u0027, \u0027Life\u0027, \u0027Addiction\u0027, \u0027Paradox\u0027, \u0027Shadow\u0027, \u0027Society\u0027\n]\n\nconst get_$: {\n\t\n\t}\t\nlet game_satastages\tgame_game_stages = []\n\tif (medimeditate) gamegame_stages.pushpush(\n\nconst MEDITATION_SECONDS = 60\n// Could make configurable?. Eh. \u002B MEDI \u002B (meditate ? 1 : 0)) \u002B  \u002B (meditate ? 1 : 0))MEDIMEDITATION_SECONDS\n\t\t\t\t\n\t\t\t\t\t\t\t{\n\t\tleblabel: \u0027Meditate\u0027,\n\t\tduration: MEDIMEDITATION_SECONDS,\n\t\t\t})\n\tfor (let i = 0; i \u003C rourounds; i\u002B\u002B) {\n\t\t\t}}\n\tfor (let i = 0rrr\tfor (let r = 0; r \u003C rounds; r\u002B\u002B) {\n\trpppplayers\n\t\t\t\t\t}\n\t\t\tgame_game_stages.pisushpush({\n\t\t\t\t\n\t\t\t\t\t\t\t})\t\t\t\tduration: secondseconds_per_bead,\n\t\t\t\tlabel: \u0027\u0060Round #{r} player #{$$p}\u0060,\t\t\t(Total game length: {roundish(\n\t\t\t\t(rounds * players * seconds_per_bead \u002B (meditate ? MEDITATION_SECONDS : 0)) / 60\n\t\t\t)} minutes)\n\t\t\u003Cdiv\u003E\n\t\t\t(Total game length: {roundish(\n\t\t\t\t(rounds * players * seconds_per_bead \u002B (meditate ? MEDITATION_SECONDS : 0)) / 60\n\t\t\t)} minutes)\n\t\t\u003C/div\u003E\ngamegame_stages.reduce(s =\u003E s.durationx, x \u002B , 0))(\n\nconst get_current_state = () =\u003E {\n\t\n\t}\texport let state\nstart_time\tfor (let s = 0; is \u003C gamegame_stages.length; is\u002B\u002B) {\n\t\t\n\t\t\t}\t\t\n\tletoffsettime_start_mslet s = 0;\n\twhile start\nimport { start } from \u0022repl\u0022;\n\nstart_ofstart_offset_msgame_duration\t\tlet state = game_stgame_stages[s]\n\t\tif (statestate.duration * 1000 \u003E offseoffset_ms) {\n\t\t\t\t\t}\n\t\t\treturn {state, offsetoffset_ms}\n\t\toffoffset_ms -= state.duration * 1000\n\treturn {\n\t\tstate: {\n\t\t\tlabel: \u0027Game complete\u0027,\t\tstate: { label: \u0027Game complete\u0027 }, offoffset_ms\n\t\t\t}// \n\n4:let timer\n$: {\n\t\n\t}\n\tif (state === \u0027playing\u0027) {\n\t\t\n\t\t\t}\t\t \u0026\u0026 timer == null\t\t//timer = setIntsetInterval(() =\u003E {\n\t\t\t\n\t\t\t\t\t}, 001000)\t\t\t//consoleconsole.loglog(\u0027tick\u0027) else if (state !== \u0027playing\u0027 \u0026\u0026 timer != null) {\n\t\t\n\t\t\t}\t\tclearIntclearInterval(timer)\n\t\ttimer = null\n\tconsoleconsole.loglog(statestate, timer)console.log(\u0027tick\u0027)\n\t\t\t\n\t\t\t\n\t\t\tlet \n\n\nconst get_current_state = (offset_ms) =\u003E {\n\tfor (let s = 0; s \u003C game_stages.length; s\u002B\u002B) {\n\t\tlet state = game_stages[s]\n\t\tif (state.duration * 1000 \u003E offset_ms) {\n\t\t\treturn {state, offset_ms}\n\t\t}\n\t\toffset_ms -= state.duration * 1000\n\t}\n\treturn {\n\t\tstate: { label: \u0027Game complete\u0027 }, offset_ms\n\t}\n}{state, offset_ms} = get_curget_current_state(DateDate.nownow() - start_tstart_time)\n\t\t\t\nlet labelgame_state, labe, game_state_offset_ms\t\t\t: game_game_stageste: state_offstate_offset_ms;let \n\t\t\tgame_state = statte; state_ofstate_offset_ms = offoffset_ms\n\t\t\tssttaattee__llaabbeellstate_progress // 0 to 1 //state.label\n\t\t\twidth = offoffset_msstate.duration * 1000 offset_ms / () 100 *\n\t\u003Ch4\u003Egstate_state_label{}\u003C/h24\u003E35250\u002B1\u002B1, complete: true\n\t\t\tif (statestate.complete)  statestate.complete ? 100\n\t\t\t:\nlet xxx = alfalse\n\t\t\t\n\t\t\tif (statestate.complete) xxx = true \u0026\u0026\u0026  xxx === false)( || xxx \t\t\t\t\t\t\t\t\t\t{/if}\n\n\t\t{/if}\t\t\t\t\t\t\t{:else if state == \u0027paused\u0027}\n\t\t\t\u003Cbutton on:click={upd(\u0027state\u0027, \u0027playing\u0027)}\u003EResume\u003C/button\u003E\n\n\tlet xxx = false\n\tgame_completed //\n\t Derived from other porropertiesgggaaammmeee___cccooommmppplllgame_completedgame_completedgame_completed!\n\tlet internal_state = game_game_completed ? \u0027completed\u0027 : stateinterninternal_stateinternalinternal_state\n\n$: {\n\t}\n\tconsoleconsole.loglog(\u0027internal state\u0027, interninternal_state)$:\nlet interninternal_state// // // //  \u0026\u0026 !game_game_completed( \u0026\u0026 || game_game_completed)game_completed || \n\t// Sadly we can\u0027t use internal_state here because it generates a cycligc dependancy.iiiinnnntttteeeerrrrnnnnaaaallll____game_completedResetwaiting\n$: {\n\t\n\t}\tif (state !== \u0027playing\u0027) game_game_completed = false\n\ttransition: width 1s  linear;0.21 *//* 1000\n\t[\n\t\t\n\t{\t\n\t\t\t}\n\t\tconsoleconsole.loglog(\u0027xxx\u0027)\n\t\tstate_label=  = \u0027Waiting for host to startgame o to start\u0027state_state_label = \u0027Waiting for game to start\u0027//0\n\t\twidth = 0\n\t\n\t else {\n\t\t\t\tstate_label = \u0027Waiting for game to start\u0027\n\t\twidth = 0\n\t\t\t}\t\t\t\t\t\tstate_label = \u0027Waiting for game to start\u0027\n\t\twidth = 0\n else \n\t\t\t}\n\t\n\tif (}\n\n$: {interninternal_state != \u0027p= \u0027playing\u0027) {=waiting\u003Cscript\u003E\nexport let room\nexport let connection\nexport let state\nexport let start_time\nexport let topic\nexport let meditate\nexport let players\nexport let rounds\nexport let seconds_per_bead\nexport let _active_sessions\n\nlet game_completed = false // Derived from other properties\nlet internal_state\n$: internal_state = game_completed ? \u0027completed\u0027 : state\n$: {\n\tif (state !== \u0027playing\u0027) {\n\t\tconsole.log(\u0027xxx\u0027)\n\t\tgame_completed = false\n\t}\n}\n\n\t// export let state\n\nconst ARCHETOPICS = [\n  \u0027Truth\u0027, \u0027Human\u0027, \u0027Energy\u0027, \u0027Beauty\u0027, \u0027Beginning\u0027, \u0027End\u0027, \u0027Birth\u0027, \u0027Death\u0027,\n  \u0027Ego\u0027, \u0027Attention\u0027, \u0027Art\u0027, \u0027Empathy\u0027, \u0027Eutopia\u0027, \u0027Future\u0027, \u0027Game\u0027, \u0027Gift\u0027,\n  \u0027History\u0027, \u0027Cosmos\u0027, \u0027Time\u0027, \u0027Life\u0027, \u0027Addiction\u0027, \u0027Paradox\u0027, \u0027Shadow\u0027, \u0027Society\u0027\n]\n\n// Could make configurable. Eh.\nconst MEDITATION_SECONDS = 60\n\nlet game_stages\n$: {\n\tgame_stages = []\n\tif (meditate) game_stages.push({\n\t\tlabel: \u0027Meditate\u0027,\n\t\tduration: MEDITATION_SECONDS,\n\t})\n\tfor (let r = 0; r \u003C rounds; r\u002B\u002B) {\n\t\tfor (let p = 0; p \u003C players; p\u002B\u002B) {\n\t\t\tgame_stages.push({\n\t\t\t\tlabel: \u0060Round ${r\u002B1} player ${p\u002B1}\u0060,\n\t\t\t\tduration: seconds_per_bead,\n\t\t\t})\n\t\t}\n\t}\n}\n\n\nconst update_state = async patch =\u003E {\n\tawait fetch(\u0060${room}/configure\u0060, {\n\t\tmethod: \u0027POST\u0027,\n\t\tmode: \u0027same-origin\u0027,\n\t\theaders: {\n\t\t\t\u0027content-type\u0027: \u0027application/json\u0027,\n\t\t},\n\t\tbody: JSON.stringify(patch)\n\t})\n}\n\nconst upd = (k, v) =\u003E () =\u003E update_state({[k]: v})\n\nconst config = k =\u003E e =\u003E {\n\tconsole.log(\u0027k\u0027, k, e.data, e.value, e.target.value, e.target.type)\n\tconst raw_value = e.target.value\n\tconst value = e.target.type === \u0027number\u0027 ? raw_value|0\n\t\t: e.target.type === \u0027checkbox\u0027 ? e.target.checked\n\t\t: raw_value\n\tupdate_state({[k]: value})\n}\n\nconst roundish = x =\u003E Math.round(x * 100) / 100\n\n// const start = () =\u003E {\n// \tconsole.log(\u0027start!\u0027)\n// \tupdate_state({state: \u0027playing\u0027})\n// }\n\n// let round_arr\n// $: round_arr = new Array(Math.max(rounds, 0)).fill()\n\n\nconst get_current_state = (offset_ms) =\u003E {\n\tfor (let s = 0; s \u003C game_stages.length; s\u002B\u002B) {\n\t\tlet state = game_stages[s]\n\t\tif (state.duration * 1000 \u003E offset_ms) {\n\t\t\treturn {state, offset_ms}\n\t\t}\n\t\toffset_ms -= state.duration * 1000\n\t}\n\treturn {\n\t\tstate: { label: \u0027Game complete\u0027, complete: true }, offset_ms\n\t}\n}\n\nlet width = 0\n\nlet timer\nlet state_label\n\n$: {\n\tconsole.log(state, timer)\n\t// Sadly we can\u0027t use internal_state here because it generates a cyclic dependancy.\n\tif (state === \u0027playing\u0027 \u0026\u0026 timer == null \u0026\u0026 !game_completed) {\n\t\ttimer = setInterval(() =\u003E {\n\t\t\tconsole.log(\u0027tick\u0027)\n\n\t\t\tlet {state, offset_ms} = get_current_state(Date.now() - start_time)\n\t\t\tstate_label = state.label\n\t\t\t\n\t\t\twidth = state.complete ? 100\n\t\t\t: 100 * offset_ms / (state.duration * 1000)\n\n\t\t\tif (state.complete) game_completed = true\n\n\t\t}, 1000)\n\t} else if ((game_completed || state !== \u0027playing\u0027) \u0026\u0026 timer != null) {\n\t\tclearInterval(timer)\n\t\ttimer = null\n\t}\n}\n\n$: {\n\tif (internal_state === \u0027waiting\u0027) {\n\t\tstate_label = \u0027Waiting for game to start\u0027\n\t\twidth = 0\n\t}\n}\n\n$: {\n\tconsole.log(\u0027internal state\u0027, internal_state)\n}\n\n// setInterval(() =\u003E width\u002B\u002B, 1000)\n\u003C/script\u003E\n\n\u003Cmain\u003E\n\t\u003Ch1\u003EGlass Bead Game Timer\u003C/h1\u003E\n\t\u003Ch4\u003ERoom: \u003Cem\u003E{room}\u003C/em\u003E\u003C/h4\u003E\n\t\u003Ch4\u003ETopic: \u003Cem\u003E{topic}\u003C/em\u003E\u003C/h4\u003E\n\t\u003Cdiv\u003E{connection} / {state}\u003C/div\u003E\n\t\u003Cdiv\u003E{_active_sessions} player(s) in room\u003C/div\u003E\n\n\t\u003Ch4\u003E{state_label}\u003C/h4\u003E\n\t\u003Cdiv id=\u0027progresscontainer\u0027\u003E\n\t\t\u003Cdiv id=\u0027progress\u0027 style=\u0027width: {width}%\u0027\u003E\u003C/div\u003E\n\t\u003C/div\u003E\n\n\t\u003Cdiv id=\u0027rounds\u0027\u003E\n\t\t\u003Ch2\u003EGame structure\u003C/h2\u003E\n\t\t{#if meditate}\n\t\t\t\u003Cdiv\u003EMeditation (1 min)\u003C/div\u003E\n\t\t{/if}\n\t\t{#each Array(Math.max(rounds, 0)) as _, r}\n\t\t\t\u003Cdiv\u003ERound {r\u002B1}:\n\t\t\t\t{#each Array(Math.max(players, 0)) as _, p}\n\t\t\t\t\t\u003Cspan\u003E{p\u002B1} \u003C/span\u003E\n\t\t\t\t{/each}\n\t\t\t\u003C/div\u003E\n\t\t{/each}\n\t\u003C/div\u003E\n\n\t\u003Cdiv id=\u0027config\u0027\u003E\n\t\t\u003Ch2\u003EConfig\u003C/h2\u003E\n\t\t{#if internal_state == \u0027waiting\u0027}\n\t\t\t\u003Cbutton on:click={upd(\u0027state\u0027, \u0027playing\u0027)}\u003EStart\u003C/button\u003E\n\t\t{:else if internal_state == \u0027playing\u0027}\n\t\t\t\u003Cbutton on:click={upd(\u0027state\u0027, \u0027paused\u0027)}\u003EPause\u003C/button\u003E\n\t\t{:else if internal_state == \u0027paused\u0027}\n\t\t\t\u003Cbutton on:click={upd(\u0027state\u0027, \u0027playing\u0027)}\u003EResume\u003C/button\u003E\n\t\t{:else if internal_state == \u0027completed\u0027}\n\t\t\t\u003Cbutton on:click={upd(\u0027state\u0027, \u0027waiting\u0027)}\u003EReset\u003C/button\u003E\n\t\t{/if}\n\n\t\t\u003Clabel\u003ETopic\n\t\t\t\u003Cinput type=\u0027text\u0027 value={topic} on:input={config(\u0027topic\u0027)} list=\u0027archetopics\u0027 \u003E\n\t\t\t\u003Cdatalist id=\u0027archetopics\u0027\u003E\n\t\t\t\t{#each ARCHETOPICS as topic}\n\t\t\t\t\t\u003Coption value={topic}\u003E\n\t\t\t\t{/each}\n\t\t\t\u003C/datalist\u003E\n\t\t\u003C/label\u003E\n\n\t\t\u003Clabel\u003E1 minute meditation before game starts\n\t\t\t\u003Cinput type=\u0027checkbox\u0027 checked={meditate} on:input={config(\u0027meditate\u0027)} \u003E\n\t\t\t\u003C!-- \u003Cinput type=\u0027range\u0027 value={players} on:submit={config(\u0027players\u0027)} min=1 max=12\u003E --\u003E\n\t\t\u003C/label\u003E\n\n\t\t\u003Clabel\u003ENumber of players\n\t\t\t\u003Cinput type=\u0027number\u0027 value={players} on:input={config(\u0027players\u0027)} min=1 max=12 \u003E\n\t\t\t\u003C!-- \u003Cinput type=\u0027range\u0027 value={players} on:submit={config(\u0027players\u0027)} min=1 max=12\u003E --\u003E\n\t\t\u003C/label\u003E\n\n\t\t\u003Clabel\u003ENumber of rounds\n\t\t\t\u003Cinput type=\u0027number\u0027 value={rounds} on:input={config(\u0027rounds\u0027)} min=1 max=20\u003E\n\t\t\t\u003C!-- \u003Cinput type=\u0027range\u0027 value={players} on:submit={config(\u0027players\u0027)} min=1 max=12\u003E --\u003E\n\t\t\u003C/label\u003E\n\n\t\t\u003Clabel\u003ESeconds per bead\n\t\t\t\u003Cinput type=\u0027number\u0027 value={seconds_per_bead} on:input={config(\u0027seconds_per_bead\u0027)}\u003E\n\t\t\t\u003C!-- \u003Cinput type=\u0027range\u0027 value={players} on:submit={config(\u0027players\u0027)} min=1 max=12\u003E --\u003E\n\t\t\u003C/label\u003E\n\n\t\t\u003Cdiv\u003E\n\t\t\t(Total game length: {roundish(\n\t\t\t\t(rounds * players * seconds_per_bead \u002B (meditate ? MEDITATION_SECONDS : 0)) / 60\n\t\t\t)} minutes)\n\t\t\u003C/div\u003E\n\t\t\u003Cdiv\u003E\n\t\t\t(Total game length: {roundish(\n\t\t\t\tgame_stages.reduce((x, s) =\u003E x \u002B s.duration, 0) / 60\n\t\t\t)} minutes)\n\t\t\u003C/div\u003E\n\t\u003C/div\u003E\n\u003C/main\u003E\n\n\u003Cstyle\u003E\n\n#config {\n\tmargin-top: 2em;\n}\n\nlabel {\n\tdisplay: block;\n}\n\n#progresscontainer {\n\t/* width: calc(100% - 50px); */\n\tmargin: 25px;\n\theight: 5em;\n\tborder: 2px solid white;\n}\n\n#progress {\n\tbackground-color: white;\n\t/* width: 50%; */\n\theight: 100%;\n\t/* transition: width 1s linear; */\n}\n\t/* main {\n\t\ttext-align: center;\n\t\tpadding: 1em;\n\t\tmax-width: 240px;\n\t\tmargin: 0 auto;\n\t}\n\n\th1 {\n\t\tcolor: #ff3e00;\n\t\ttext-transform: uppercase;\n\t\tfont-size: 4em;\n\t\tfont-weight: 100;\n\t}\n\n\t@media (min-width: 640px) {\n\t\tmain {\n\t\t\tmax-width: none;\n\t\t}\n\t} */\n\u003C/style\u003E\n\nexport let ready\n\t{#if interninternal_state === \u0027loading\u0027}\n\t\n\t{:else }}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t{/if}\t\t\t\u003Ch1\u003ELoading intgame state from server\u003C/h1\u003E\n\t\t\t\t\u003Cbutton on:click={upd(\u0027state\u0027, \u0027waiting\u0027)}\u003EReset\u003C/button\u003E\n\t\t\t{:else if internal_state == \u0027completed\u0027}\t\t\t\t\t\t\t internal_state == \u0027completed\u0027 || paused game\n\t\t\t\t{/if}\t\t\t\n\t\t\t#\n\n\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\u003C!-- \u003Cinput type=\u0027range\u0027 value={players} on:submit={config(\u0027players\u0027)} min=1 max=12\u003E --\u003E\u003C!-- \u003Cinput type=\u0027range\u0027 value={players} on:submit={config(\u0027players\u0027)} min=1 max=12\u003E --\u003E\u003C!-- \u003Cinput type=\u0027range\u0027 value={players} on:submit={config(\u0027players\u0027)} min=1 max=12\u003E --\u003E\u003C!-- \u003Cinput type=\u0027range\u0027 value={players} on:submit={config(\u0027players\u0027)} min=1 max=12\u003E --\u003E\n\t\tlet last_atestate = null\n\t\t\n\t\t\t\n\t\t\tif (last_last_state \u0026\u0026 last_stlast_state != !== state) {\n\t\t\t\t\n\t\t\t\t\t\t\t}\t\t\t\tconsoleconsole.loglog(\u0027state changed\u0027)\n\t\t\t\tlast_last_state = statestate{\n\t\t\t\t\n\t\t\t\t\t\t\t}\n\t\t\t\t// And play gong\n\t\t\t\n\t\t\t\t\t\tif (last_state !== state) {\n\t\t\t\tconsole.log(\u0027state changed\u0027)\n\t\t\t\tlast_state = state\n\t\t\t}\n\n\t\n\u003Caudio id=\u0022audiotag1\u0022 src=\u0022audio/flute_c_long_01.wav\u0022 preload=\u0022auto\u0022\u003E\u003C/audio\u003E\t\n\thi_-metal-tone.mp3\u003Ctrack kind=\u0022captions\u0022\u003E\n\t\t\n\t\t\u003C/track\t\u003C/track\u003E\u003Ctrack kind=\u0022captions\u0022\u003E\taudio1 bind:this={audio1}\n\nlet audio1\n\t\taudaudio1.play()../\n\t\u003Caudio bind:this={audio1} src=\u0022../hi-metal-tone.mp3\u0022 preload=\u0022auto\u0022\u003E\u003Ctrack kind=\u0022captions\u0022\u003E\u003C/audio\u003Elo2let audio1\n2 --\u003E\u003C!-- {\n\t\t\n\t\t}\n\t\tlabel: \u0027Meditate\u0027,\n\t\tduration: MEDITATION_SECONDS,\n\tif (meditate) game_stages.push({\t\t\n\t}]\t\t\t\t\n\t\tmeditate ? \u0027Meditation\u0027 : \u0027Game\u0027\u0060${} will start is about to start\u00603// details\n\t\t\tdetails\n\t\t\t\u003Csummary\u003EConfiguration\n\t\t\t\tGame \u003C/summ/summary\u003E\u003ESettingssround_round_round_end_end_// \n\t\t\t\tcompleend_auend_audio.play()completcompletcomplet\n\t\t\t\troundround_audio.play()if (!state.complete) // \n\t\tget_current_state(Date.now() - start_time)\n\t\t// The game miWe migthht ght have loaded when the game is already finished. IfThis is dirty, but  kinda cidirty...\n\t\t\n\t\t\n\t\t\n\t\tlet {state } } if (.statestate.complete) {\n\t\t\t\n\t\t\t\t\t}\t\t\tgame_game_completed = true, but \u003C/style\u003EI\u0027m special casing it to avoid audio playing.\u003C/style\u003E\u003C/style\u003E\n\t\t//  else {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\tstate_state_label = \u0027Game already finishedfinished. \u0027\n\n\nlet {state, offset_ms}\ngame_game_game_game_game_game_\n\n$: {\n\tconsole.log(state, timer)\n\t// Sadly we can\u0027t use internal_state here because it generates a cyclic dependancy.\n\tif (state === \u0027playing\u0027 \u0026\u0026 timer == null \u0026\u0026 !game_completed) {\n\t\t// We might have loaded when the game is already finished. This is kinda\n\t\t// dirty, but I\u0027m special casing it to avoid audio playing.\n\t\tif (get_current_state(Date.now() - start_time).state.complete) {\n\t\t\tgame_completed = true\n\t\t\tstate_label = \u0027Game already finished\u0027\n\t\t} else {\n\t\t\tlet last_state = null\n\n\t\t\ttimer = setInterval(() =\u003E {\n\t\t\t\tconsole.log(\u0027tick\u0027)\n\n\t\t\t\tlet {state, offset_ms} = get_current_state(Date.now() - start_time)\n\t\t\t\tstate_label = state.label\n\t\t\t\t\n\t\t\t\twidth = state.complete ? 100\n\t\t\t\t: 100 * offset_ms / (state.duration * 1000)\n\n\t\t\t\tif (last_state !== state) {\n\t\t\t\t\tconsole.log(\u0027state changed\u0027)\n\t\t\t\t\tlast_state = state\n\t\t\t\t\t// if (!state.complete) round_audio.play()\n\t\t\t\t}\n\n\t\t\t\tif (state.complete) {\n\t\t\t\t\t// And play gong\n\t\t\t\t\tgame_completed = true\n\t\t\t\t\tcomplete_audio.play()\n\t\t\t\t}\n\n\n\t\t\t}, 1000)\n\t\t}\n\t} else if ((game_completed || state !== \u0027playing\u0027) \u0026\u0026 timer != null) {\n\t\tclearInterval(timer)\n\t\ttimer = null\n\t}\n}// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // \n$: game_comgame_completed = game_state == null ? false : game_stategame_state.complete!!\n#: $: width = state.complete ? 100\n\t\t\t\t: 100 * offset_ms / (state.duration * 1000)$: width = state.complete ? 100 : 100 * offset_ms / (state.duration * 1000)\n\n#: $: state_lstate_label = game_state == null ? \u0027unknowno\u0027 : game_stategame_state.label// // \n\t\t\t\n\t\t\tconst tic k = () =\u003E {\n\t\t\t\t\n\t\t\t\t\t\t\t}\t\t\t\tconsole.log(\u0027tick\u0027)\n\n\t\t\t\tlet {state, offset_ms} = get_current_state(Date.now() - start_time)\n\t\t\t\t// state_label = state.label\n\t\t\t\t\n\t\t\t\tif (last_state !== state) {\n\t\t\t\t\tconsole.log(\u0027state changed\u0027)\n\t\t\t\t\tlast_state = state\n\t\t\t\t\t// if (!state.complete) round_audio.play()\n\t\t\t\t}\n\n\t\t\t\tif (state.complete) {\n\t\t\t\t\t// And play gong\n\t\t\t\t\t// game_completed = true\n\t\t\t\t\tcomplete_audio.play()\n\t\t\t\t}no_soundaudioplay_if (play_audio) \n\t\t\t\tticktick(true)\n\t\t\tticktick(false)\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgame_game_game_game_game_state: new_\n\t\t\tgame_state = new_gamnew_game_state\n\t\t\t\t\t\t\tgame_state = new_game_state\t\t\t\tcomplete_state\nconst { label: \u0027Game complete\u0027, complete: true }complete_state = \n\t\t\tconsoleconsole.loglog(\u0027state\u0027, statestate, \u0027timcompleted\u0027\u0027, game_compgame_completed)// // \n\tgame_completed = game_state == null ? false : !!game_state.completelet completed\n\tccccoooommmmpppplllleeeetttteeeedddd\n\tconconsole\u0027xx\u0027, , \t// Sadly we can\u0027t use internal_state here because it generates a cyclic dependancy.\n\tlet completed = game_state == null ? false : !!game_state.complete\ncompleted\n\t\t\t\tcompleted = game_new_game_statenew_game_state.complete\n\t\tconosoleconsole.loglog(\u0027cancelled interval timer\u0027)\n\nconst tick = (play_audio) =\u003E {\n\t\n\t}\t\tconst tick = (play_audio) =\u003E {\n\t\t\tconsole.log(\u0027tick\u0027)\n\t\t\tconsole.log(\u0027state\u0027, state, \u0027completed\u0027, completed)\n\n\t\t\tlet {game_state: new_game_state, offset_ms} = get_current_state(Date.now() - start_time)\n\t\t\t// state_label = state.label\n\t\t\t\n\t\t\tif (last_state !== game_state) {\n\t\t\t\tconsole.log(\u0027state changed\u0027)\n\t\t\t\tlast_state = game_state\n\t\t\t\tgame_state = new_game_state\n\t\t\t\tcompleted = new_game_state.complete\n\t\t\t\t// if (!state.complete) round_audio.play()\n\t\t\t}\n\n\t\t\tif (game_state.complete) {\n\t\t\t\t// And play gong\n\t\t\t\t// completed = true\n\t\t\t\t// if (play_audio) complete_audio.play()\n\t\t\t}\n\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tlet last_state = null\n// state \u0026\u0026 statestate.completenew_newg_game_state !== // \n\n\t}\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t: new_offset_ms\n\toffset_ms = new_ofnew_offset_ms// // !!completed\u0026\u0026 , new_gamnew_game_state.labelabel, new_ganew_game_state.complete ? : false//  ga, game_state$: consoleconsole.loglog(\u0027game state xxx\u0027, game_state)\t\tgame_state = new_game_state\ngame_statexx.x.x.xx..const tick = (play_audio) =\u003E {\n\tconsole.log(\u0027tick\u0027)\n\tconsole.log(\u0027state\u0027, state, \u0027completed\u0027, state \u0026\u0026 state.complete)\n\n\tlet x = get_current_state(Date.now() - start_time)\n\t// state_label = state.label\n\t\n\toffset_ms = x.offset_ms\n\tif (x.game_state !== game_state) {\n\t\tconsole.log(\u0027state changed\u0027, x.game_state.label, x.game_state.complete)\n\t\tgame_state = x.game_state\n\t\t// completed = new_game_state.complete\n\t\t// if (!state.complete) round_audio.play()\n\n\t\tif (game_state.complete) {\n\t\t\t// And play gong\n\t\t\t// completed = true\n\t\t\t// if (play_audio) complete_audio.play()\n\t\t}\n\t}\n}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst tick = (play_audio) =\u003E {\n\tconsole.log(\u0027tick\u0027)\n\tconsole.log(\u0027state\u0027, state, \u0027completed\u0027, state \u0026\u0026 state.complete)\n\n\tlet x = get_current_state(Date.now() - start_time)\n\t// state_label = state.label\n\t\n\toffset_ms = x.offset_ms\n\tif (x.game_state !== game_state) {\n\t\tconsole.log(\u0027state changed\u0027, x.game_state.label, x.game_state.complete)\n\t\tgame_state = x.game_state\n\t\t// completed = new_game_state.complete\n\t\t// if (!state.complete) round_audio.play()\n\n\t\tif (game_state.complete) {\n\t\t\t// And play gong\n\t\t\t// completed = true\n\t\t\t// if (play_audio) complete_audio.play()\n\t\t}\n\t}\n}x_x_x_x_: x_gamex_game_statex_gamex_ = null{}nullsetTimeout(() =\u003E , 0)\n\nif (state === \u0027playing\u0027) ticktick()ffalse// bar_bar_bar_bar_\nlet timer\n// {xyiviacyiviacagesagesggggstagegg\nconst complete_stage = { label: \u0027Game complete\u0027, complete: true }waiting\u0027Waiting for game to start\u0027\n\tif (state !== \u0027playing\u0027) return waitingwaiting_stage \u0026\u0026 state !== \u0027=== \u0027waiting\u0027\n\tgntcurrgntcurrgntcurrgntcurrgntcurrgntcurrgntcurrgntcurrgntcurrgntcurrgntcurrgntcurrge\n\n$: game_completed = current_stage == null ? false : !!current_stage.complete\nlet bar_width = 0\n$: bar_width = state.complete ? 100 : 100 * offset_ms / (state.duration * 1000)\n\nlet state_label\n$: state_label = current_stage == null ? \u0027unknown\u0027 : current_stage.label\n\n// ggeegggg || state === \u0027paused\u0027// \ntick(false)const {new_stage: stagstage: new_stage, noeew_offs: offset_ms}new_offsnnnneeee____wwww____ssssttttaaaaggggeeee // waiting, playing, paused.loading, // \nif (state === \u0027playing\u0027 || state === \u0027paused\u0027) tick(false)// !== loadingcurrent_current_\nlet , // \n\tif (state !== \u0027loading\u0027) ticktick()false\n\t// //  = null// current_stage == null ? 0\n\t: \n\t: new_offs: \n\t\tticktick(false)setTime setImmesetImmediate() () =\u003E )setTimeoutsetTimeout( || state === \u0027loading\u0027\n$: ticktick(false) = []\n$: ticktick(false)// //  else if (state === \u0027waiting\u0027) {\n\t\t\n\t\t\t}\t\tticktick()false// {stage: }, offset_ms: 0, duration: iInfinity\n\t\tif (play_audio) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (current_stage.complete) complete_audio.play()\n\t\t\telse  round_audio.play()\n\t\t\t\t\t}\n\t\tno_sound_: true !! \u0026\u0026 !new_stagenew_stage.no_no_sound1151// // \n\t\ttick(false)const get_current_stage = (offset_ms) =\u003E {\n\tif (state === \u0027waiting\u0027) return {stage: waiting_stage, offset_ms: 0}\n\n\tfor (let s = 0; s \u003C game_stages.length; s\u002B\u002B) {\n\t\tlet stage = game_stages[s]\n\t\tif (stage.duration * 1000 \u003E offset_ms) {\n\t\t\treturn {stage, offset_ms}\n\t\t}\n\t\toffset_ms -= stage.duration * 1000\n\t}\n\treturn {\n\t\tstage: complete_stage, offset_ms\n\t}\n}\n// // // // // // // // // // // // // \n\tlet offset_seconds = offsetoffset_ms / 1000Math.roundround()sec: offset_sec * 1000secsecsecsecsecsecsec\n\t\t\t\u003C!-- \u003Cdiv\u003E\n\t\t\t\t(Total game length: {roundish(\n\t\t\t\t\t(rounds * players * seconds_per_bead \u002B (meditate ? MEDITATION_SECONDS : 0)) / 60\n\t\t\t\t)} minutes)\n\t\t\t\u003C/div\u003E --\u003E\t\t\t\t\n2em\n\t\t\t\tr, p\n\nconst progress_class = (typetype,\nimport { type } from \u0022os\u0022;\n\n r, p) =\u003E {\n\t\n\t}\tif (statecurrent_gcurrent_stage == null) return \u0027\u0027\n\t\n\t\n\t\t\t\ttype: \u0027bead\u0027,\t\t\t\ttype: \u0027bead\u0027, r, p\n\t\ttype: \u0027meditate\u0027,\n\t\ttype\u0027: \u0027 type: \u0027complete\u0027,new_stage.type === \u0027complete\u0027current_stage.type === \u0027complete\u0027current_stage.type === complete\u0027\u0027.type === \u0027compelte\u0027letecurrentcurrent_stage.type === \u0027complete\u0027current// \tif currencurrent_stage\nconst order = [\u0027meditate, \u0027, \u0027bead\u0027, \u0027complete\u0027]if const current_io = orderorder.indeindexOf(currencurrent_stage.type)\tconst current_o = order.indexOf(current_stage.type)\nelement_otype\n\t\n\tif (currencurrent_o element_o \u003C) return \u0027done\u0027\n\telse if (elemelement_o \u003E currentcurrent_o) return \u0027waiting\u0027\n\telse return \u0027ipactive\u0027 class={progress_class(\u0027meditate\u0027)} class={progress_class(\u0027meditate\u0027)}bead, r, p\n\n.done { color: blue; }.done { color: blue; }\nwaitingwhite.waiting { color: white; }\nactivepurplemagmagentastage, ssttaaggeecurrent_stage, current_stage,  if (tyope === \u0027bead\u0027)\n\telse return \n\t\t r=  == stage.r ? =\nconst class_for( = x =\u003E x \u003C 0 ? \u0027done\u0027 : \n\tx \u003E 0 ? \u0027waiting\u0027\n\t: \u0027active\u0027\n\t\n\tconst o_odiff = element_o \u003C current_o-\n\treturn o_diff === 0 !== 0 ? class_forclass_for(o_diff)\n\t\t: \n\t\t: class_forclass_for(0) ?\n\t\t\t() return r === stage.r ? \n\t\t\t return r === stage.r ? \t\t\t\n\tif (// element_o - current_o!==element_o - current_o\n\t\n\t tytype === \u0027bead\u0027 \u0026\u0026 stage.type === \u0027bead\u0027 ?\n\t\t: class_for(element_o - current_o)\n\t\t r === stage.r ? class_forclass_for(p - stage.p) : (class_forclass_for(r - stage.r))text-dectext-decoration: ;strilineline-through border: 1px solid white;#eee888\n\nlet settings_disabled = $:state === \u0027playing\u0027\n// This will get more complex in time. For now, pause the game to fiddle.disabled={ settsettings_disabled} disabled={settings_disabled} disabled={settings_disabled} disabled={settings_disabled} disabled={settings_disabled}\n#: $: current_stage.type === \u0027complete\u0027console.loglog(\u0027curren tt stage type\u0027, ) \u0026\u0026 current_current_stage\n#: $: consoleconsole.loglog(\u0027game_completed\u0027, game_complgame_completed)\n)(, (current_stage.type === \u0027complete\u0027)current_stage \u0026\u0026 // $: game_completed = current_stage == null ? false : (current_stage.type === \u0027complete\u0027)\n// \u0026\u0026// {\n\t\n\t}\n\tconsoleconsole.loglog(\u0027updateining game_completed\u0027, currencurrent_stage)// \n\n$: console.log(\u0027current stage type\u0027, current_stage \u0026\u0026 current_stage.type)\n// // // // //  setTsetTimeout(() =\u003E )\nlet internal_state\n$: internal_state = game_completed ? \u0027completed\u0027 : state\n$: {\n\tif (state !== \u0027playing\u0027) {\n\t\tgame_completed = false\n\t}\n}\n// \nlet game_completed\nlet game_completed\n$: {\n\tconsole.log(\u0027updating game_completed\u0027, current_stage)\n\tgame_completed = current_stage == null ? false : (current_stage.type === \u0027complete\u0027)\n}\n\n// // // // // state !== \u0027playing\u0027 || ()\n\t// // // // \nlet bar_width = 0\n// \nlet bar_width = 0\n// $: game_completed = current_stage \u0026\u0026 (current_stage.type === \u0027complete\u0027)\n// // // // // // // // // // // internal_state === \u0027waiting\u0027 ? \u0027Waiting for game to start\u0027\n: \t//  // setTimeout needed to get around some weird race condition.\n\t\t// setTimeout needed to get around some weird race condition. There\u0027s probably other ways to better ways to structure this :/\n\t\t// \n\t: starcurrencurrent_stage.type === \u0027waiting\u0027 ? 0state\n\t: current_stage.type === \u0027complete\u0027 ? 100\t\n\t\t\t\u003Cdiv id=\u003E{stage_secs_remaining}\u003C/div\u003Eoffsetoffset_sec\n\t\t\u003Cdiv id=\u0027progresscontainer\u0027\u003E\t\tcurrent_stage.duration -  ? current_stage : \u0027\u0027\n\t\n\t\n *//*  \u0026\u0026 !complinternal_internal_stateinternal_current_stage \u0026\u0026 !complgame_complgame_completed)(ainterninternal_state === \u0027playing\u0027 || interninternal_state --=== \u0027paused\u0027 \u0026\u0026 current_current_stage)(\n\t\t\u003Ca href=\u0027.\nimport Game from \u0022./Game.svelte\u0022\nGame./.././..\u0022\u0022\u003EJoin anohter ranother room\u003C/a\u003E \u003Ca href=\u0022../..\u0022\u003EJoin another room\u003C/a\u003E\n\t\t\u003Ca href=\u0022../..\u0022\u003EJoin another room\u003C/a\u003EChange =\t\t\t\t\t\u003Cdiv id=\u0027progresscontainer\u0027\u003E\n id=time\u0027\u0027progress_\n\n#progress-time_ {\n\t\n\t}\tposition: absolute;\n\tcolor: red;setTimeout(() =\u003E tick(false)) || state === \u0027paiseused\u0027export let seconds_per_bead\npaused_progress \u002B pausepaused_progress-\n\tlet const time = state === \u0027playing\u0027 ? Date.now() - start_time\n\t\t: state === \u0027paused\u0027 ? pauspaused_progress\n\t\t: 0time\n\tfont-size: 60px;\n\tpositioin: p\tposition: relative;\n\tborder: 2px solid white;\n\theight: 5em;\n\tmargin: 25px;\t\n\tmix-blenmix-blend-mode: ;differedifference330202#rgb(#330202 *//* \t/* font-size: #330202; */\nrgb(204,254,254)color\tcolor: rgb(204,254,254);\nfont-size60px;\tcolor: rgb(204,254,254);\n *//*  *//* white *//* \u0027\u0027sroundroundbead\u0027 \u002B  \n.bead {\n\t\n\t}\tdisplay: block;margin-leftright: 1em;23px42em154\n\tmargin-efleft: 1em;5px\n\t\n\n\t\n\n\tcolor: #888;\n.waiting {\n}\t *//* \n\tpadding-: 0 2px;\n\t\tpadding: 0 2px;\t421(()\t\t\u003Ch4\u003ETopic: \u003Cem\u003E{topic}\u003C/em\u003E\u003C/h4\u003E\n\n\t\t{#if _active_sessions == 1}\t\t\u003Cdiv\u003E{_active_sessions} player(s) in room\u003C/div\u003E\n\t\n\t\t\t{:else}\t\t\n\t\t{/if}\tYou are alone in the roomjoin youare with youinare in the this room\n#h1 {\n\t\n\t}\tmaringrgin-top: 2em;\n1\u003Ca href=\u0022../..\u0022\u003E(Change room)\u003C/a\u003E leave --\u003E\u003C!-- \n\t\t{#if _active_sessions == 1}{#if }_active_sessions == 1 --\u003E\u003C!-- connection !== \u0027connected\u0027\n\t\t{/if}\n\t\t\tDISCONNECTED FROM \u003Cdiv\u003EGAME SERVER\u003C/div\u003E\n\t\t\t\u003C{:else}\t\t\n\t\t{/if}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\u003Cdiv\u003E{connection} / {state}\u003C/div\u003E\n --\u003E\u003C!-- \u003E == = \u0027waiting\u0027 ? \u0027Waiting for game to start\u0027\n\t\t\t\t: state === \u0027playing\u0027:  ? \u0027GamePGame in ppausedGame pausedPAUSEDGAME \u0027\n\t\t: \u0027\u0027\t\n\t\t\tthe \n\t\thhhhhh444444divdivdivdivdivdiv\t\t\t: state === \u0027paused\u0027 ? \u0027GAME PAUSED\u0027\nplaying  -Game in progress\n\t\t\u003Ch4\u003ERoom: \u003Cem\u003E{room}\u003C/em\u003E \u003Ca href=\u0022../..\u0022\u003E(leave)\u003C/a\u003E\u003C/h4\u003Econtorlsrols\n\nbutton \n{\n\t\n\t}\tfont-size: 200%;140%\n\tmargin: 10px 0;\n\nsummary {\n\t\n\t}\ttext-decorattext-decoration: ;undunderline\n\tpointer: mocursor: pointer;grabpointer\n\t\t\t\n\t\t\t\u003Cdiv\u003E\u003C/div\u003E\n\t\t\t\t\n\t\t\tThis will dmodify the game control for all players.drive \n\t\t\t\t\t\t\u003Cdiv\u003E\n\t\t\t\tThis will drive the game for all players.\n\t\t\t\u003C/div\u003E\n\n\t\t\t\n\t\t\t\t\t\t\t\t\t\u003Cdiv\u003E\n\t\t\t\tThis will drive the game for all players.\n\t\t\t\u003C/div\u003E\n\n\n\ndetails \u003E * {\n\t\n\t}\tmarginl-efleft: 2em;:not(fir:fir:first-child)\ndetilaails: { {\n\t\n\t}\tpadding-top: 2em;\ndetails {\n\tpadding-top: 2em;\n} \u003E :first:first-child:first-childntbottommargin *//* 1inputlabelwidth: min-width: 10em;\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\u003C\u003C\u003C\u003Cssssppppaaaannnn\u003E\u003E\u003E\u003E\u003C\u003C\u003C\u003C////ssssppppaaaannnn\u003E\u003E\u003E\u003Elabel \u003E :fir:first-child\n\tdisplay: inlineinline-block;\n\t\t\t\t\u003Cspan\u003E\u003C/span\u003E52Meditate: style=\u0027\u0027maringgin-top: 1em;\n\t\n\tmain {\n\t\t\n\t\t\t}\tmargin-bottom: 2em;3 --\u003E\u003C!-- \n\t\t\u003Ch4\u003ETopic: \u003Cem\u003E{topic}\u003C/em\u003E\u003C/h4\u003E --\u003E\u003C!-- 11 --\u003E\u003C!-- \n\t\t\u003C!-- \u003Ch4\u003ETopic: \u003Cem\u003E{topic}\u003C/em\u003E\u003C/h4\u003E --\u003E11\n\ninput:  {\n\t\n\t}\theight: width: 2em3em;10\n\theight: 1.3;10pxfont-size: 16px\n\nsummary \u003E label{  {\n\t\n\t}\tmarginlline-height: 2;margint-tbottom3pxeffectPre-gamem  meditationmin-67543\n\tcolor: #330202;\nbutton {\n\tfont-size: 140%;\n\tmargin: 10px 0;\n}\n\n\tcolor: #330202; /* TODO: Use CASSS variable for this */\n\t\t\t\n\t\t\t\u003Cbutton on:click={upd(\u0027state\u0027, \u0027playing\u0027)}\u003EResume\u003C/button\u003E_xxBecome Magister Ludimagistertryue// \n\t\t\t\n\t\t\t\u003Cdiv\u003E\n\t\t\t\tMagister status: {}\n\t\t\t\t\u003C/div\t\t\t\u003C/div\u003Eexport let _active_sessions\nmagi_magistermagi_magisterJSON.stringifystringify()\n\t\t{#if }\n\t\t\t\n\t\t{/if_magister == null || _mag_magister == faltrue}\n\t\t{:else}\n\t\t\t,\u003Cdiv\u003EamGamWaiGame controlled by Only the Magister Ludi can Tis in is in control of this game\u003C/div\u003E\t\t\u003Cdetails id=\u0027config\u0027\u003E\n\t\t\t\u003Csummary\u003EGame controls\u003C/summary\u003E\n\n\t\t\t\u003Cdiv\u003E\n\t\t\t\tMagister status: {JSON.stringify(_magister)}\n\t\t\t\u003C/div\u003E\n\n\t\t\t\u003Cdiv\u003E\n\t\t\t\tThis will effect all players.\n\t\t\t\u003C/div\u003E\n\n\t\t\t{#if internal_state == \u0027waiting\u0027}\n\t\t\t\t\u003Cbutton on:click={upd(\u0027state\u0027, \u0027playing\u0027)}\u003EStart\u003C/button\u003E\n\t\t\t{:else if internal_state == \u0027playing\u0027}\n\t\t\t\t\u003Cbutton on:click={upd(\u0027state\u0027, \u0027paused\u0027)}\u003EPause\u003C/button\u003E\n\t\t\t{:else if internal_state == \u0027paused\u0027}\n\t\t\t\t\u003Cbutton on:click={upd(\u0027state\u0027, \u0027playing\u0027)}\u003EResume\u003C/button\u003E\n\t\t\t{/if}\n\n\t\t\t{#if internal_state == \u0027paused\u0027 || internal_state == \u0027completed\u0027 }\n\t\t\t\t\u003Cbutton on:click={upd(\u0027state\u0027, \u0027waiting\u0027)}\u003EReset game\u003C/button\u003E\n\t\t\t{/if}\n\n\t\t\t\u003Clabel\u003E\n\t\t\t\t\u003Cspan\u003ETopic\u003C/span\u003E\n\t\t\t\t\u003Cinput disabled={settings_disabled} type=\u0027text\u0027 value={topic} on:input={config(\u0027topic\u0027)} list=\u0027archetopics\u0027 \u003E\n\t\t\t\t\u003Cdatalist id=\u0027archetopics\u0027\u003E\n\t\t\t\t\t{#each ARCHETOPICS as topic}\n\t\t\t\t\t\t\u003Coption value={topic}\u003E\n\t\t\t\t\t{/each}\n\t\t\t\t\u003C/datalist\u003E\n\t\t\t\u003C/label\u003E\n\n\t\t\t\u003Clabel\u003E\n\t\t\t\t\u003Cspan\u003EPre-game meditation\u003C/span\u003E\n\t\t\t\t\u003Cinput disabled={settings_disabled} type=\u0027checkbox\u0027 checked={meditate} on:input={config(\u0027meditate\u0027)} \u003E\n\t\t\t\u003C/label\u003E\n\n\t\t\t\u003Clabel\u003E\n\t\t\t\t\u003Cspan\u003ENumber of players\u003C/span\u003E\n\t\t\t\t\u003Cinput disabled={settings_disabled} type=\u0027number\u0027 value={players} on:input={config(\u0027players\u0027)} min=1 max=12 \u003E\n\t\t\t\u003C/label\u003E\n\n\t\t\t\u003Clabel\u003E\n\t\t\t\t\u003Cspan\u003ENumber of rounds\u003C/span\u003E\n\t\t\t\t\u003Cinput disabled={settings_disabled} type=\u0027number\u0027 value={rounds} on:input={config(\u0027rounds\u0027)} min=1 max=20\u003E\n\t\t\t\u003C/label\u003E\n\n\t\t\t\u003Clabel\u003E\n\t\t\t\t\u003Cspan\u003ESeconds per bead\u003C/span\u003E\n\t\t\t\t\u003Cinput disabled={settings_disabled} type=\u0027number\u0027 value={seconds_per_bead} on:input={config(\u0027seconds_per_bead\u0027)}\u003E\n\t\t\t\u003C/label\u003E\n\n\t\t\t\u003Cdiv style=\u0027margin-top: 1em;\u0027\u003E\n\t\t\t\t(Total game length: {roundish(\n\t\t\t\t\tgame_stages.reduce((x, s) =\u003E x \u002B s.duration, 0) / 60\n\t\t\t\t)} minutes)\n\t\t\t\u003C/div\u003E\n\n\t\t\t\u003Cbutton on:click={upd(\u0027_magister\u0027, \u0027true\u0027)}\u003EBecome Magister Ludi\u003C/button\u003E\n\t\t\u003C/details\u003E\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\n\t\t\t\t\u003Cdiv\u003E\n\t\t\t\t\tMagister status: {JSON.stringify(_magister)}\n\t\t\t\t\u003C/div\u003E\n\t\t\t\t\t\t\t\n\t\t\n\t\t\t\t\u003Cdiv\u003E\n\t\t\t\t\u003C/div\u003E\t id=becomemagister_box\u0027\u0027\n\t\t\t\t\tTheOnce somebody becomesascends to mMagister Ludi of the game, all other users players loare locked out of , can no longer start or stop the game. Magister ludThe Ludi will lose orelinquish  status\n\n#config {\n\tmargin-top: 2em;\n}\n\n#config {\n\tmargin-top: 2em;\n}\n\nlabel {\n\tdisplay: block;\n}\n#config {\n\tmargin-top: 2em;\n}\n\n/* **** CofinfGame config ***** //***** Game config *****/\n#config {\n\tmargin-top: 2em;\n}\n\n#config {\n\tmargin-top: 2em;\n}\n\n\n\n.#magister_box {\n\t\n\t}\tborder: 1px dashed  white;\n\tmargin: 21em 0;\n\tpwdiadding: 2em;0.5Ascend to the throne of\n\n#magister_box\u003E but \u003E button {\n\t\n\t}\tdisplay: block;\n\t\n\tmax-width: 300px;5\n\t\t\t\t\tOnce somebody ascends to Magister Ludi status, other players can no longer start or stop the game.Assume the mantle ofa playercontrol theIF a f a master of the games is present, other players cannot access the game\u0027s controls.lose\tfont-xsize: 80%;10\n\tbackground-color: black;\n\tblend-modebackground-blend-mode: ;darkenwhite\n\tblend-momix-blend-mode: ;darken; *//* #1c0303\n\twidth: 100%;\n\tmargin: 0 2em;When the cannot  the game --\u003E\u003C!-- \n\t\t\t\t\tWhen present, only the mMaster of the GAmesame s can control thehis game. hethe  timer\n\tmargin-top: 0;18\n\tmarpadding: 2px audo;to;00\n\tpadding: 34px 0;3has access to the game controls Will you borrow power, or steal it?Restart\n\nbody {\n\t\n\t}\tcolor: red;bckacbackground-color\n\tbackground-color: red;\n\t\t\t\t\t#{{#ifawait }\n\t\t\t\t\t\t\n\t\t\t\t\t{:then } \n\t\t\t\t\t\t\n\t\t\t\t\t{/awaitifif }\n\t\t\t\t\t\t\n\t\t\t\t\t{/if_magier_magister == null}\n\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t{:else if\t\t\t\t\t _mag_magister == true}\n\t\t\t\t\t\t\t\t\t\t\t\u003Cbutton on:click={upd(\u0027_magister\u0027, \u0027true\u0027)}\u003EAssume the mantle of Magister Ludi\u003C/button\u003E\n\t\t\t\t\t\tWhen present, only the Master of the Games has access to the game controls.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnullAbdicate Magister Ludi statusYou are the amaster of the games. No other players can access this room\u0027s controls.\u003Cdiv\u003E\u003C/div\u003E\u003Cdiv\u003E\u003C/div\u003E\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\u003C/div\u003E\t\t\t\t\t\t You will lose exclusive right  this status if you close this browser window.null.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\u003Cdiv\u003E You are the master of the games. No other players can access this room\u0027s controls.\u003C/div\u003E\t\u003Cdiv\u003E\t\t\t\t\t\t\u003Cdiv\u003EYou will lose this status if you close this browser window. \u003C/div\u003Epppp bind:open={}config_open\n\nlet config_opconfig_open\n\n$: consoleconsole.loglog(\u0027config\u0027, congiffig_config_open)if (magst_magister == true) config_config_open = true$: if (_magister == true) config_open = true\n_acti_active_sessions = false\n// The first yseruse r has the config open by default.\n\n *//* \n\tbackground0c-color: white;\n\tcolor: color: #330202; Magister Ludi (mg)texcluisive  of the gameOther players cannot play/pause conor configure this gamer power will be lost .\n\t\t\t\t\t\t\u003Cdiv\u003EWhen present, the Magister Ludi (master of the games) has exclusive control of the game.\u003C/div\u003Epppp\u003Ci\u003EAdvanced\u003C/i\u003E - for large games\n\topacity: 5040%;\n\t\topacity: 40%;\t\n\n\topacity: 40%;\n\t\n\topacity: 40%;\n\tanimate: transition: opaopacity 1s fade;\n\n#magister_box:hover {\n\t\n\t} \topacity: 100%;0.24 ease-in-out;oitut3\n#magister_box.opaque {\n\t\n\t}opacity: 40%;\t10 class:magister_magister_opauque\n\nmagister_opaquelet  = false\n$: magimagister_opaque = true//  _masgister === true || ==_activ_active_sessions1 \u003E 616=// MAke the amagister box fully visible once there\u0027s enouhg pla critical mass of players in the roomT is\n\u003Csvelte:body/\u003E / class=style=\u0022background-color: red;\u0022lclass=\u0022foo\u0022\n\t\n\t.foo {} color: red; background-color: red;You are rspoesponsible foring, ingand inghave exclusive control overcrwowncontrolDo onot or you will be dethroned\n\t\t\t\t{#if _magister == null}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\u003Cdiv\u003E\n\t\n\t\t\t\t\t\t\u003C{:seelse}\n\t\t\t\t\t\t{/eif}\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\tYou are magister luMagister Ludi - master of the games. thisvar(--bg-color)var(--bg-color)var(--bg-color)var(--bg-color)var(--bg-color)highlight\n\n#cinonfig.magister {\n\t\n\t}var(--bg-color)\tbgackground-color: ;-hihigh--bg-highlight *//*  , #magister_box:hover\n_ class:mmagister={magister}_\n\nmain \u003E * {\n\t\n\t}\tmargin=- *//* : lef-left: 2em;3pp\t\t\t\t\t\t\u003Cp\u003EYou are the master of the games. You have exclusive control over playing, pausing and configuring this game.\u003C/p\u003E\n\t\t\t\t\t\t\u003Cp\u003EDo not close this browser window or you will be dethroned.\u003C/p\u003E\n\t\t\t\t\t\t\t\t\t\tYou are the only player whowith in charge of these controls.\tThese controls are yours. --\u003E\u003C!--  \n\t\t\t\tclass:magister_opaque --\u003E\u003C!--  class:magister_opaqueCThese c aloneto weiieldalone --\u003E\u003C!-- to wieldeialoneCThese cclass:magister={_magister} the class:magister={_magister} CThese c aloneto weiieldalone --\u003E\u003C!--  class:magister={_magister} .magister {\n\tbackground-color: var(--bg-highlight);\n}\n\n\n\n\u003Csvelte:head\u003E\n   {#if isModal}\n      \u003Cstyle\u003E\n         body {\n            overflow: hidden;\n         }\n      \u003C/style\u003E\n   {/if}\n\u003C/svelte:head\u003E\t\n\n\u003Csvelte:head\u003E\n   {#if isModal}\n      \u003Cstyle\u003E\n         body {\n            overflow: hidden;\n         }\n      \u003C/style\u003E\n   {/if}\n\u003C/svelte:head\u003E\t\u003Cmain class:magister={_magister}\u003E\n --\u003E\u003C!-- _mag_magisterbackground-color: var(--bg-highlight);\t\t\t\t\t\tppclass. class=config\u0027\u0027will start is in control of this gameis managing this game? Will you\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n_clock_offset: 0,export let  \u002B off_oclo_clock_offsetBecome *//*  *//*  *//* 80100m *//* \n\t\n\t\n\tposition: absolute;\n\tleft: 0; rigtht: 0;relativeabsolute\n\tposition: relative; *//* \n\tpadding: 0 auto;2em0auto0 pattern=\u0027d*\u0027[0-9]pattern=\u0027[0-9]*\u0027 pattern=\u0027[0-9]*\u0027 Assume the mantle of Magister Ludi\n\nlet audio_works = falsefalse\n\u0022$$: $$ {\n\t\n\t}$:\tlet a=  = new AudioAudio()\n\ta.playplay().thenthen(() =\u003E {audio_woaudio_works = true}\n\t\t,\n\t\t\t\t() =\u003E {audio_works = true},\n\n\t\t\t\n\t\tconsolconsole..loglog(\u0027Audio does not work\u0027)\n\t\t\t)\n\nfunction test_audio() {\n\t\n\t}\n$: {\t\t\t\t\t\n}\t\t\t\t\t\t\t\t\t\t\t\t\ntest_autest_audio()\n\n\t\t\taudio_works = truefalse\n\t\t\n\t\t\u003Cdiv\u003E\n\t\t\t\u003C/div\t\t\u003C/div\u003E\n\t\t{#if !audio_audio_works}\n\t\t{/if}\n\t\t\tAudio does not work\n\t\t\t\u003Cbutton on:cloick=\nfunction fix_audio(){  {\n\t\n\t]}\tef{fix_audfix_audio}\u003EFix\u003C//button\u003E\ttest_test_audio)()\n\t\t\t\n\t\t\n\t\t\tconsole.log(\u0027Audio does not work\u0027)works\n\tconsoleconsole.loglog(\u0027xx\u0027)\n\tconsole.log(\u0027xx\u0027)\n\taa.src = \u0027/lo-metal-tone.mp3\u0027\n\ta.vovolume = 0setTimeout(, 0)100\n.1fg// // // // // // // // // // // // // // // // // // // // //  --\u003E\u003C!-- var(--bg-fg--fg-color)var(--fg--fg-color)var(--fg-color)hwhitevar(--fg-c--fg-color)\n\t\t\t\u003Cdiv\u003E\u003C/div\u003E\n\t\t\t\t\u003C/div\u003E\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tssppaann\n\tpadding: 2px;32px\u0027bead\u0027 \u0027  \u002B\u002B 02px\n\tborder: 2px solid fg-var(--f--fg-color);#eee3332px solid #686868 *//* 646\n\ninput:[type=checkbox] {\n\t\n\t}\tdisplay:hidd dihidnone;height: 20px;1.5em2progress// // // // // // // // // // // // // // // // // // // // true// );(--fg-cocolor\n\tbxlet audio_works = true\n\n// function test_audio() {\n// \tlet a = new Audio()\n// \ta.volume = 0.1\n// \ta.src = \u0027/lo-metal-tone.mp3\u0027\n// \ta.play().then(\n// \t\t() =\u003E {\n// \t\t\taudio_works = true\n// \t\t\tconsole.log(\u0027Audio works\u0027)\n// \t\t},\n// \t\t() =\u003E {\n// \t\t\taudio_works = false\n// \t\t\tconsole.log(\u0027Audio does not work\u0027)\n// \t\t}\n// \t)\n// }\nfunction fix_audio(e) {\n// \tconsole.log(\u0027xx\u0027)\n// \ttest_audio()\n}\n// setTimeout(test_audio, 0)\n\n\nconst ARCHETOPICS = [\n  \u0027Truth\u0027, \u0027Human\u0027, \u0027Energy\u0027, \u0027Beauty\u0027, \u0027Beginning\u0027, \u0027End\u0027, \u0027Birth\u0027, \u0027Death\u0027,\n  \u0027Ego\u0027, \u0027Attention\u0027, \u0027Art\u0027, \u0027Empathy\u0027, \u0027Eutopia\u0027, \u0027Future\u0027, \u0027Game\u0027, \u0027Gift\u0027,\n  \u0027History\u0027, \u0027Cosmos\u0027, \u0027Time\u0027, \u0027Life\u0027, \u0027Addiction\u0027, \u0027Paradox\u0027, \u0027Shadow\u0027, \u0027Society\u0027\n]\n\n// Could make configurable. Eh.\nconst MEDITATION_SECONDS = 60\n\nlet game_stages = []\n$: {\n\tgame_stages = [{\n\t\tlabel: \u0060${meditate ? \u0027Meditation\u0027 : \u0027Game\u0027} is about to start\u0060,\n\t\tduration: 3,\n\t\tno_sound: true\n\t}]\n\tif (meditate) game_stages.push({\n\t\tlabel: \u0027Meditate\u0027,\n\t\ttype: \u0027meditate\u0027,\n\t\tduration: MEDITATION_SECONDS,\n\t})\n\tfor (let r = 0; r \u003C rounds; r\u002B\u002B) {\n\t\tfor (let p = 0; p \u003C players; p\u002B\u002B) {\n\t\t\tgame_stages.push({\n\t\t\t\tlabel: \u0060Round ${r\u002B1} player ${p\u002B1}\u0060,\n\t\t\t\tduration: seconds_per_bead,\n\t\t\t\ttype: \u0027bead\u0027, r, p\n\t\t\t})\n\t\t}\n\t}\n}\n\n\nconst update_state = async patch =\u003E {\n\tawait fetch(\u0060${room}/configure\u0060, {\n\t\tmethod: \u0027POST\u0027,\n\t\tmode: \u0027same-origin\u0027,\n\t\theaders: {\n\t\t\t\u0027content-type\u0027: \u0027application/json\u0027,\n\t\t},\n\t\tbody: JSON.stringify(patch)\n\t})\n}\n\nconst upd = (k, v) =\u003E () =\u003E update_state({[k]: v})\n\nconst config = k =\u003E e =\u003E {\n\t// console.log(\u0027k\u0027, k, e.data, e.value, e.target.value, e.target.type)\n\tconst raw_value = e.target.value\n\tconst value = e.target.type === \u0027number\u0027 ? raw_value|0\n\t\t: e.target.type === \u0027checkbox\u0027 ? e.target.checked\n\t\t: raw_value\n\tupdate_state({[k]: value})\n}\n\nconst roundish = x =\u003E Math.round(x * 10) / 10\n\n\nconst waiting_stage = { label: \u0027Waiting for game to start\u0027, duration: Infinity }\nconst complete_stage = { label: \u0027Game complete\u0027, type: \u0027complete\u0027 }\nconst get_current_stage = (offset_ms) =\u003E {\n\tif (state === \u0027waiting\u0027) return {stage: waiting_stage, offset_ms: 0}\n\n\tlet offset_sec = Math.round(offset_ms / 1000)\n\tfor (let s = 0; s \u003C game_stages.length; s\u002B\u002B) {\n\t\tlet stage = game_stages[s]\n\t\tif (stage.duration \u003E offset_sec) {\n\t\t\treturn {stage, offset_sec}\n\t\t}\n\t\toffset_sec -= stage.duration\n\t}\n\treturn {\n\t\tstage: complete_stage, offset_sec\n\t}\n}\n\nlet current_stage = null, offset_sec\n$: console.log(\u0027current stage\u0027, current_stage)\n\n\nconst tick = (play_audio) =\u003E {\n\tconsole.log(\u0027tick\u0027)\n\t// console.log(\u0027state\u0027, state, \u0027completed\u0027, state \u0026\u0026 state.complete)\n\n\tconst time = state === \u0027playing\u0027 ? Date.now() \u002B _clock_offset - start_time\n\t\t: state === \u0027paused\u0027 ? paused_progress\n\t\t: 0\n\tconst {stage: new_stage, offset_sec: new_offs} = get_current_stage(time)\n\t// state_label = state.label\n\t\n\toffset_sec = new_offs\n\tif (new_stage !== current_stage) {\n\t\tconsole.log(\u0027state changed\u0027, new_stage.label, new_stage.type === \u0027complete\u0027)\n\t\tcurrent_stage = new_stage\n\t\t// completed = new_game_state.complete\n\t\t// if (!state.complete) round_audio.play()\n\n\t\tif (play_audio \u0026\u0026 !new_stage.no_sound) {\n\t\t\tif (current_stage.type === \u0027complete\u0027) complete_audio.play()\n\t\t\telse round_audio.play()\n\t\t}\n\t}\n}\n\nlet timer\n$: {\n\t// Sadly we can\u0027t use internal_state here because it generates a cyclic dependancy.\n\tlet completed = current_stage ? current_stage.type === \u0027complete\u0027 : false\n\t// console.log(\u0027xx\u0027, state, timer, completed, current_stage)\n\n\t// if (state !== \u0027loading\u0027) tick(false)\n\n\tif (state === \u0027playing\u0027 \u0026\u0026 timer == null \u0026\u0026 !completed) {\n\t\t// setTimeout needed to get around some weird race condition.\n\t\t// There\u0027s probably better ways to structure this :/\n\t\tsetTimeout(() =\u003E tick(false))\n\t\ttimer = setInterval(() =\u003E {\n\t\t\ttick(true)\n\t\t}, 1000)\n\t} else if ((completed || state !== \u0027playing\u0027) \u0026\u0026 timer != null) {\n\t\tconsole.log(\u0027cancelled interval timer\u0027)\n\t\tclearInterval(timer)\n\t\ttimer = null\n\t} else if (state === \u0027waiting\u0027 || state === \u0027paused\u0027) {\n\t\tsetTimeout(() =\u003E tick(false))\n\t}\n}\n\nlet game_completed\n$: {\n\t// console.log(\u0027updating game_completed\u0027, current_stage)\n\tgame_completed = (state !== \u0027playing\u0027 || current_stage == null) ? false\n\t: (current_stage.type === \u0027complete\u0027)\n}\n\nlet internal_state\n$: internal_state = game_completed ? \u0027completed\u0027 : state\n\nlet bar_width = 0\n$: bar_width = current_stage == null ? 0\n\t: state === \u0027waiting\u0027 ? 0\n\t: current_stage.type === \u0027complete\u0027 ? 100\n\t: 100 * offset_sec / current_stage.duration\n\nlet stage_label\n$: stage_label = internal_state === \u0027waiting\u0027 ? \u0027Waiting for game to start\u0027\n\t: current_stage == null ? \u0027unknown\u0027 : current_stage.label\n\nconst order = [\u0027meditate\u0027, \u0027bead\u0027, \u0027complete\u0027]\nconst class_for = x =\u003E x \u003C 0 ? \u0027done\u0027\n\t: x \u003E 0 ? \u0027waiting\u0027\n\t: \u0027active\u0027\n\nconst progress_class = (stage, type, r, p) =\u003E {\n\tif (stage == null) return \u0027\u0027\n\n\tconst current_o = order.indexOf(stage.type)\n\tconst element_o = order.indexOf(type)\n\n\t// const o_diff = element_o - current_o\n\treturn type === \u0027bead\u0027 \u0026\u0026 stage.type === \u0027bead\u0027\n\t\t? (r === stage.r ? class_for(p - stage.p) : class_for(r - stage.r))\n\t\t: class_for(element_o - current_o)\n}\n\n// This will get more complex in time. For now, pause the game to fiddle.\n$: settings_disabled = state === \u0027playing\u0027\n\nlet config_open = false\n\n$: if (_magister === true) config_open = true\n\n// The first user has the config open by default.\n$: if (_active_sessions === 1) config_open = true\n\n// The magister box is fully visible once there\u0027s a critical mass of players in the room\n$: magister_opaque = _magister === true || _active_sessions \u003E= 6\n\n\n\u003C/script\u003E\n\n\u003Csvelte:head\u003E\n\t{#if _magister}\n\t\t\u003Cstyle\u003E\nbody {\n\tbackground-color: var(--bg-highlight);\n}\n\t\t\u003C/style\u003E\n\t{/if}\n\u003C/svelte:head\u003E\t\n\n\u003C!-- \u003Cmain class:magister={_magister}\u003E --\u003E\n\u003Cmain\u003E\n\t\u003Caudio bind:this={round_audio} src=\u0022/lo-metal-tone.mp3\u0022 preload=\u0022auto\u0022\u003E\u003Ctrack kind=\u0022captions\u0022\u003E\u003C/audio\u003E\n\t\u003Caudio bind:this={complete_audio} src=\u0022/hi-metal-tone.mp3\u0022 preload=\u0022auto\u0022\u003E\u003Ctrack kind=\u0022captions\u0022\u003E\u003C/audio\u003E\n\n\t{#if internal_state === \u0027loading\u0027}\n\t\t\u003Ch1\u003ELoading game state\u003C/h1\u003E\n\t{:else}\n\t\t\u003C!-- \u003Ch1\u003EGlass Bead Game Timer\u003C/h1\u003E --\u003E\n\t\t\u003C!-- \u003Ch1\u003E{topic}\u003C/h1\u003E --\u003E\n\t\t\u003Ch1\u003ETopic: \u003Cem\u003E{topic}\u003C/em\u003E\u003C/h1\u003E\n\t\t\u003C!-- \u003Ch4\u003ETopic: \u003Cem\u003E{topic}\u003C/em\u003E\u003C/h4\u003E --\u003E\n\t\t\u003Ch4\u003ERoom: \u003Cem\u003E{room}\u003C/em\u003E \u003Ca href=\u0022../..\u0022\u003E(leave)\u003C/a\u003E\u003C/h4\u003E\n\n\t\t{#if !audio_works}\n\t\t\u003Cdiv\u003E\n\t\t\tAudio does not work\n\t\t\t\u003Cbutton on:click={fix_audio}\u003EFix\u003C/button\u003E\n\t\t\u003C/div\u003E\n\t\t{/if}\n\n\t// \t// a.src = \u0027/lo-metal-tone.mp3\u0027\n/silence.mlp3\t// export let state\n\nconst ARCHETOPICS = [\n  \u0027Truth\u0027, \u0027Human\u0027, \u0027Energy\u0027, \u0027Beauty\u0027, \u0027Beginning\u0027, \u0027End\u0027, \u0027Birth\u0027, \u0027Death\u0027,\n  \u0027Ego\u0027, \u0027Attention\u0027, \u0027Art\u0027, \u0027Empathy\u0027, \u0027Eutopia\u0027, \u0027Future\u0027, \u0027Game\u0027, \u0027Gift\u0027,\n  \u0027History\u0027, \u0027Cosmos\u0027, \u0027Time\u0027, \u0027Life\u0027, \u0027Addiction\u0027, \u0027Paradox\u0027, \u0027Shadow\u0027, \u0027Society\u0027\n]\n\n// Could make configurable. Eh.\nconst MEDITATION_SECONDS = 60\n\nlet game_stages = []\n$: {\n\tgame_stages = [{\n\t\tlabel: \u0060${meditate ? \u0027Meditation\u0027 : \u0027Game\u0027} is about to start\u0060,\n\t\tduration: 3,\n\t\tno_sound: true\n\t}]\n\tif (meditate) game_stages.push({\n\t\tlabel: \u0027Meditate\u0027,\n\t\ttype: \u0027meditate\u0027,\n\t\tduration: MEDITATION_SECONDS,\n\t})\n\tfor (let r = 0; r \u003C rounds; r\u002B\u002B) {\n\t\tfor (let p = 0; p \u003C players; p\u002B\u002B) {\n\t\t\tgame_stages.push({\n\t\t\t\tlabel: \u0060Round ${r\u002B1} player ${p\u002B1}\u0060,\n\t\t\t\tduration: seconds_per_bead,\n\t\t\t\ttype: \u0027bead\u0027, r, p\n\t\t\t})\n\t\t}\n\t}\n}\n\n\nconst update_state = async patch =\u003E {\n\tawait fetch(\u0060${room}/configure\u0060, {\n\t\tmethod: \u0027POST\u0027,\n\t\tmode: \u0027same-origin\u0027,\n\t\theaders: {\n\t\t\t\u0027content-type\u0027: \u0027application/json\u0027,\n\t\t},\n\t\tbody: JSON.stringify(patch)\n\t})\n}\n\nconst upd = (k, v) =\u003E () =\u003E update_state({[k]: v})\n\nconst config = k =\u003E e =\u003E {\n\t// console.log(\u0027k\u0027, k, e.data, e.value, e.target.value, e.target.type)\n\tconst raw_value = e.target.value\n\tconst value = e.target.type === \u0027number\u0027 ? raw_value|0\n\t\t: e.target.type === \u0027checkbox\u0027 ? e.target.checked\n\t\t: raw_value\n\tupdate_state({[k]: value})\n}\n\nconst roundish = x =\u003E Math.round(x * 10) / 10\n\n\nconst waiting_stage = { label: \u0027Waiting for game to start\u0027, duration: Infinity }\nconst complete_stage = { label: \u0027Game complete\u0027, type: \u0027complete\u0027 }\nconst get_current_stage = (offset_ms) =\u003E {\n\tif (state === \u0027waiting\u0027) return {stage: waiting_stage, offset_ms: 0}\n\n\tlet offset_sec = Math.round(offset_ms / 1000)\n\tfor (let s = 0; s \u003C game_stages.length; s\u002B\u002B) {\n\t\tlet stage = game_stages[s]\n\t\tif (stage.duration \u003E offset_sec) {\n\t\t\treturn {stage, offset_sec}\n\t\t}\n\t\toffset_sec -= stage.duration\n\t}\n\treturn {\n\t\tstage: complete_stage, offset_sec\n\t}\n}\n\nlet current_stage = null, offset_sec\n$: console.log(\u0027current stage\u0027, current_stage)\n\n\nconst tick = (play_audio) =\u003E {\n\tconsole.log(\u0027tick\u0027)\n\t// console.log(\u0027state\u0027, state, \u0027completed\u0027, state \u0026\u0026 state.complete)\n\n\tconst time = state === \u0027playing\u0027 ? Date.now() \u002B _clock_offset - start_time\n\t\t: state === \u0027paused\u0027 ? paused_progress\n\t\t: 0\n\tconst {stage: new_stage, offset_sec: new_offs} = get_current_stage(time)\n\t// state_label = state.label\n\t\n\toffset_sec = new_offs\n\tif (new_stage !== current_stage) {\n\t\tconsole.log(\u0027state changed\u0027, new_stage.label, new_stage.type === \u0027complete\u0027)\n\t\tcurrent_stage = new_stage\n\t\t// completed = new_game_state.complete\n\t\t// if (!state.complete) round_audio.play()\n\n\t\tif (play_audio \u0026\u0026 !new_stage.no_sound) {\n\t\t\tif (current_stage.type === \u0027complete\u0027) complete_audio.play()\n\t\t\telse round_audio.play()\n\t\t}\n\t}\n}\n\nlet timer\n$: {\n\t// Sadly we can\u0027t use internal_state here because it generates a cyclic dependancy.\n\tlet completed = current_stage ? current_stage.type === \u0027complete\u0027 : false\n\t// console.log(\u0027xx\u0027, state, timer, completed, current_stage)\n\n\t// if (state !== \u0027loading\u0027) tick(false)\n\n\tif (state === \u0027playing\u0027 \u0026\u0026 timer == null \u0026\u0026 !completed) {\n\t\t// setTimeout needed to get around some weird race condition.\n\t\t// There\u0027s probably better ways to structure this :/\n\t\tsetTimeout(() =\u003E tick(false))\n\t\ttimer = setInterval(() =\u003E {\n\t\t\ttick(true)\n\t\t}, 1000)\n\t} else if ((completed || state !== \u0027playing\u0027) \u0026\u0026 timer != null) {\n\t\tconsole.log(\u0027cancelled interval timer\u0027)\n\t\tclearInterval(timer)\n\t\ttimer = null\n\t} else if (state === \u0027waiting\u0027 || state === \u0027paused\u0027) {\n\t\tsetTimeout(() =\u003E tick(false))\n\t}\n}\n\nlet game_completed\n$: {\n\t// console.log(\u0027updating game_completed\u0027, current_stage)\n\tgame_completed = (state !== \u0027playing\u0027 || current_stage == null) ? false\n\t: (current_stage.type === \u0027complete\u0027)\n}\n\nlet internal_state\n$: internal_state = game_completed ? \u0027completed\u0027 : state\n\nlet bar_width = 0\n$: bar_width = current_stage == null ? 0\n\t: state === \u0027waiting\u0027 ? 0\n\t: current_stage.type === \u0027complete\u0027 ? 100\n\t: 100 * offset_sec / current_stage.duration\n\nlet stage_label\n$: stage_label = internal_state === \u0027waiting\u0027 ? \u0027Waiting for game to start\u0027\n\t: current_stage == null ? \u0027unknown\u0027 : current_stage.label\n\nconst order = [\u0027meditate\u0027, \u0027bead\u0027, \u0027complete\u0027]\nconst class_for = x =\u003E x \u003C 0 ? \u0027done\u0027\n\t: x \u003E 0 ? \u0027waiting\u0027\n\t: \u0027active\u0027\n\nconst progress_class = (stage, type, r, p) =\u003E {\n\tif (stage == null) return \u0027\u0027\n\n\tconst current_o = order.indexOf(stage.type)\n\tconst element_o = order.indexOf(type)\n\n\t// const o_diff = element_o - current_o\n\treturn type === \u0027bead\u0027 \u0026\u0026 stage.type === \u0027bead\u0027\n\t\t? (r === stage.r ? class_for(p - stage.p) : class_for(r - stage.r))\n\t\t: class_for(element_o - current_o)\n}\n\n// This will get more complex in time. For now, pause the game to fiddle.\n$: settings_disabled = state === \u0027playing\u0027\n\nlet config_open = false\n\n$: if (_magister === true) config_open = true\n\n// The first user has the config open by default.\n$: if (_active_sessions === 1) config_open = true\n\n// The magister box is fully visible once there\u0027s a critical mass of players in the room\n$: magister_opaque = _magister === true || _active_sessions \u003E= 6\n\n\n\u003C/script\u003E\n\n\u003Csvelte:head\u003E\n\t{#if _magister}\n\t\t\u003Cstyle\u003E\nbody {\n\tbackground-color: var(--bg-highlight);\n}\n\t\t\u003C/style\u003E\n\t{/if}\n\u003C/svelte:head\u003E\t\n\n\u003C!-- \u003Cmain class:magister={_magister}\u003E --\u003E\n\u003Cmain\u003E\n\t\u003Caudio bind:this={round_audio} src=\u0022/lo-metal-tone.mp3\u0022 preload=\u0022auto\u0022\u003E\u003Ctrack kind=\u0022captions\u0022\u003E\u003C/audio\u003E\n\t\u003Caudio bind:this={complete_audio} src=\u0022/hi-metal-tone.mp3\u0022 preload=\u0022auto\u0022\u003E\u003Ctrack kind=\u0022captions\u0022\u003E\u003C/audio\u003E\n\n\t{#if internal_state === \u0027loading\u0027}\n\t\t\u003Ch1\u003ELoading game state\u003C/h1\u003E\n\t{:else}\n\t\t\u003C!-- \u003Ch1\u003EGlass Bead Game Timer\u003C/h1\u003E --\u003E\n\t\t\u003C!-- \u003Ch1\u003E{topic}\u003C/h1\u003E --\u003E\n\t\t\u003Ch1\u003ETopic: \u003Cem\u003E{topic}\u003C/em\u003E\u003C/h1\u003E\n\t\t\u003C!-- \u003Ch4\u003ETopic: \u003Cem\u003E{topic}\u003C/em\u003E\u003C/h4\u003E --\u003E\n\t\t\u003Ch4\u003ERoom: \u003Cem\u003E{room}\u003C/em\u003E \u003Ca href=\u0022../..\u0022\u003E(leave)\u003C/a\u003E\u003C/h4\u003E\n\n\timport * as topics from \u0027./topics.json\u0027\nconsole.loglog(topics)\n\t\t\n\t\t\u003Cimg\u003E\u003C/img\u003E id= /\u0027asdftopic\u0027\n\t\t\n\n$: {\n\t\n\t}\tbind:this={round_audio}topic_img\nlet topic_img\ttopic_imgdiv\u003C/div\u003E/.innerHTML = topics[topictopic.toLos.toLocaleLowerCase())]SVGsIconstopicIconsif (topic_img)  id=tipopicimg\u0027\u0027\n\n#topicimg {\n\t}\n\twidthmax-width: 200px;\n\t\t\n\t\t\u003Cdetailsdetails\u003E\u003C/details\u003E\n\t\t\t\n\t\t\u003Csummary\u003EUIOther stuff\u003C/su/summary\u003E\u003E\n\t\t\t\n\t\t\u003Cdiv id=\u0027rounds\u0027\u003E\n\t\t\t\u003Ch2\u003EGame\u003C/h2\u003E\n\t\t\t{#if meditate}\n\t\t\t\t\u003Cdiv\u003E\n\t\t\t\t\t\u003Cspan class={progress_class(current_stage, \u0027meditate\u0027)}\u003EMeditation (1 min)\u003C/span\u003E\n\t\t\t\t\u003C/div\u003E\n\t\t\t{/if}\n\t\t\t{#each Array(Math.max(rounds, 0)) as _, r}\n\t\t\t\t\u003Cdiv\u003ERound {r\u002B1}:\n\t\t\t\t\t{#each Array(Math.max(players, 0)) as _, p}\n\t\t\t\t\t\t\u003Cspan class={\u0027bead \u0027 \u002B progress_class(current_stage, \u0027bead\u0027, r, p)}\u003E{p\u002B1} \u003C/span\u003E\n\t\t\t\t\t{/each}\n\t\t\t\t\u003C/div\u003E\n\t\t\t{/each}\n\t\t\u003C/div\u003E\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\u003Cdiv\u003E\n\t\t\t{state === \u0027waiting\u0027 ? \u0027Waiting for the game to start\u0027\n\t\t\t: state === \u0027paused\u0027 ? \u0027GAME PAUSED\u0027\n\t\t\t: state === \u0027playing\u0027 ? \u0027Game in progress\u0027\n\t\t\t: \u0027\u0027}\n\t\t\u003C/div\u003E\n\t\t{#if connection !== \u0027connected\u0027}\n\t\t\t\u003Cdiv\u003EDISCONNECTED FROM GAME SERVER\u003C/div\u003E\n\t\t{:else}\n\t\t\t{#if _active_sessions == 1}\n\t\t\t\t\u003Cdiv\u003EYou are alone in the room\u003C/div\u003E\n\t\t\t{:else}\n\t\t\t\t\u003Cdiv\u003E{_active_sessions} players are in this room\u003C/div\u003E\n\t\t\t{/if}\n\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\n\t\t\t\u003C!-- I\u0027m not ready to delete these UI elements but we might not use them --\u003E\t\t\u003Ch4\u003ERoom: \u003Cem\u003E{room}\u003C/em\u003E \u003Ca href=\u0022../..\u0022\u003E(leave)\u003C/a\u003E\u003C/h4\u003E\n\t\t\t\n\t\t\t\t\t\t{#if internal_state == \u0027waiting\u0027}\n\t\t\t\t\t\u003Cbutton on:click={upd(\u0027state\u0027, \u0027playing\u0027)}\u003EStart\u003C/button\u003E\n\t\t\t\t_magister == null || _magister == true \u0026\u0026 )(\t\n\t\t\t\u003C{/if}\t\tAdvanced// // \n\ttext-align: cencenter;\n\t\t\u003Cvspdiv classstyle=\u0027\u0027\u003E\u003C/div\u003Eheoghight: 400px;\n\tdisplay: inline-bloinline-block;3\n\t\t\t\n\t\t\t\t\t\u003Ch1\u003E{topic}\u003C/h1\u003E\t\t\t\u003Cscript lang=\u0022ts\u0022\u003E\nimport type { HtmlTag } from \u0027svelte/internal\u0027;\nimport type { GameConfig } from \u0027./shared\u0027;\n\nimport * as topicIcons from \u0027./topics.json\u0027\n\nexport let room: string\n\nexport let connection: \u0027waiting\u0027 | \u0027connecting\u0027 | \u0027connected\u0027\n\nexport let game_config: GameConfig\n// export let state // loading, waiting, playing, paused.\n// export let start_time\n// export let topic\n// export let meditate\n// export let players\n// export let rounds\n// export let seconds_per_bead\n// export let paused_progress\n\nexport let _active_sessions: number\nexport let _magister: true | null\nexport let _clock_offset: number\n\n// let game_completed = false // Derived from other properties\n\nlet round_audio: HTMLAudioElement\nlet complete_audio: HTMLAudioElement\nlet topic_img: HTMLElement\n\nlet state: GameConfig[\u0027state\u0027]\n$: state = game_config.state\n\n$: console.log(\u0027Game configuration changed\u0027, game_config)\n\n\t// export let state\n\nconst ARCHETOPICS = [\n  \u0027Truth\u0027, \u0027Human\u0027, \u0027Energy\u0027, \u0027Beauty\u0027, \u0027Beginning\u0027, \u0027End\u0027, \u0027Birth\u0027, \u0027Death\u0027,\n  \u0027Ego\u0027, \u0027Attention\u0027, \u0027Art\u0027, \u0027Empathy\u0027, \u0027Eutopia\u0027, \u0027Future\u0027, \u0027Game\u0027, \u0027Gift\u0027,\n  \u0027History\u0027, \u0027Cosmos\u0027, \u0027Time\u0027, \u0027Life\u0027, \u0027Addiction\u0027, \u0027Paradox\u0027, \u0027Shadow\u0027, \u0027Society\u0027\n]\n\n$: {\n\tif (topic_img) {\n\t\tconst svgContent = topicIcons[game_config.topic.toLocaleLowerCase() as keyof typeof topicIcons]\n\t\tif (svgContent) topic_img.innerHTML = svgContent\n\t}\n}\n\n// Could make configurable. Eh.\nconst MEDITATION_SECONDS = 60\n\ninterface GameStage {\n\tlabel: string,\n\ttype: \u0027waiting\u0027 | \u0027bead\u0027 | \u0027meditate\u0027 | \u0027contemplation\u0027 | \u0027complete\u0027,\n\tduration: number,\n\tno_sound?: true,\n\tr?: number, p?: number\n}\n\nlet game_stages: GameStage[] = []\n$: {\n\tgame_stages = [{\n\t\tlabel: \u0060${game_config.meditate ? \u0027Meditation\u0027 : \u0027Game\u0027} is about to start\u0060,\n\t\ttype: \u0027waiting\u0027,\n\t\tduration: 3,\n\t\tno_sound: true\n\t}]\n\tif (game_config.meditate) game_stages.push({\n\t\tlabel: \u0027Meditate\u0027,\n\t\ttype: \u0027meditate\u0027,\n\t\tduration: MEDITATION_SECONDS,\n\t})\n\tfor (let r = 0; r \u003C game_config.rounds; r\u002B\u002B) {\n\t\tfor (let p = 0; p \u003C game_config.players; p\u002B\u002B) {\n\t\t\tif (game_config.seconds_between_bead \u0026\u0026 (r \u003E 0 || p \u003E 0)) game_stages.push({\n\t\t\t\tlabel: \u0027Breathe\u0027,\n\t\t\t\tduration: game_config.seconds_between_bead,\n\t\t\t\ttype: \u0027bead\u0027\n\t\t\t})\n\n\t\t\tgame_stages.push({\n\t\t\t\tlabel: game_config.players \u003E 1 ? \u0060Round ${r\u002B1} player ${p\u002B1}\u0060 : \u0060Round ${r\u002B1}\u0060,\n\t\t\t\tduration: game_config.seconds_per_bead,\n\t\t\t\ttype: \u0027bead\u0027, r, p\n\t\t\t})\n\t\t}\n\t}\n\n\tif (game_config.contemplation) game_stages.push({\n\t\tlabel: \u0022Contemplate the game\u0027s passing\u0022,\n\t\ttype: \u0027contemplation\u0027,\n\t\tduration: MEDITATION_SECONDS,\n\t})\n\n\tconsole.log(\u0027game stages\u0027, game_stages, game_config.seconds_between_bead)\n}\n\n// TODO: The protocol for these update methods doesn\u0027t use game_state properly.\nconst update_state = async (patch: Record\u003Cstring, string | number | boolean | null\u003E) =\u003E {\n\tawait fetch(\u0060${room}/configure\u0060, {\n\t\tmethod: \u0027POST\u0027,\n\t\tmode: \u0027same-origin\u0027,\n\t\theaders: {\n\t\t\t\u0027content-type\u0027: \u0027application/json\u0027,\n\t\t},\n\t\tbody: JSON.stringify(patch)\n\t})\n}\n\nconst upd = (k: string, v: string | number | boolean | null) =\u003E () =\u003E update_state({[k]: v})\n\nconst config = (k: string): svelte.JSX.FormEventHandler\u003CHTMLInputElement\u003E =\u003E (e) =\u003E {\n\t// console.log(\u0027k\u0027, k, e.data, e.value, e.target.value, e.target.type)\n\tconst target = e.target as HTMLInputElement\n\tconst raw_value = target.value\n\tconst value = target.type === \u0027number\u0027 ? ~~raw_value\n\t\t: target.type === \u0027checkbox\u0027 ? target.checked\n\t\t: raw_value\n\tupdate_state({[k]: value})\n}\n\nconst roundish = (x: number) =\u003E Math.round(x * 10) / 10\n\n\nconst waiting_stage: GameStage = { label: \u0027Waiting for game to start\u0027, type: \u0027waiting\u0027, duration: Infinity }\nconst complete_stage: GameStage = { label: \u0027Game complete\u0027, type: \u0027complete\u0027, duration: Infinity }\nconst get_current_stage = (offset_ms: number): {stage: GameStage, offset_sec: number} =\u003E {\n\tif (state === \u0027waiting\u0027) return {stage: waiting_stage, offset_sec: 0}\n\n\tlet offset_sec = Math.round(offset_ms / 1000)\n\tfor (let s = 0; s \u003C game_stages.length; s\u002B\u002B) {\n\t\tlet stage = game_stages[s]\n\t\tif (stage.duration \u003E offset_sec) {\n\t\t\treturn {stage, offset_sec}\n\t\t}\n\t\toffset_sec -= stage.duration\n\t}\n\treturn {\n\t\tstage: complete_stage, offset_sec\n\t}\n}\n\nlet current_stage: GameStage | null = null, offset_sec: number\n$: console.log(\u0027current stage\u0027, current_stage)\n\n\nconst tick = (play_audio: boolean) =\u003E {\n\tconsole.log(\u0027tick\u0027)\n\t// console.log(\u0027state\u0027, state, \u0027completed\u0027, state \u0026\u0026 state.complete)\n\n\tconst time = state === \u0027playing\u0027 ? Date.now() \u002B _clock_offset - game_config.start_time\n\t\t: state === \u0027paused\u0027 ? game_config.paused_progress!\n\t\t: 0\n\tconst {stage: new_stage, offset_sec: new_offs} = get_current_stage(time)\n\t// state_label = state.label\n\n\toffset_sec = new_offs\n\tif (new_stage !== current_stage) {\n\t\tconsole.log(\u0027state changed\u0027, new_stage.label, new_stage.type === \u0027complete\u0027)\n\t\tcurrent_stage = new_stage\n\t\t// completed = new_game_state.complete\n\t\t// if (!state.complete) round_audio.play()\n\n\t\tif (play_audio \u0026\u0026 !new_stage.no_sound) {\n\t\t\tif (current_stage.type === \u0027complete\u0027 || current_stage.type === \u0027contemplation\u0027) complete_audio.play()\n\t\t\telse round_audio.play()\n\t\t}\n\t}\n}\n\nlet timer: number | null\n$: {\n\t// Sadly we can\u0027t use internal_state here because it generates a cyclic dependancy.\n\tlet completed = current_stage ? current_stage.type === \u0027complete\u0027 : false\n\t// console.log(\u0027xx\u0027, state, timer, completed, current_stage)\n\n\t// if (state !== \u0027loading\u0027) tick(false)\n\n\tif (state === \u0027playing\u0027 \u0026\u0026 timer == null \u0026\u0026 !completed) {\n\t\t// setTimeout needed to get around some weird race condition.\n\t\t// There\u0027s probably better ways to structure this :/\n\t\tsetTimeout(() =\u003E tick(false))\n\t\ttimer = setInterval(() =\u003E {\n\t\t\ttick(true)\n\t\t}, 1000)\n\t} else if ((completed || state !== \u0027playing\u0027) \u0026\u0026 timer != null) {\n\t\tconsole.log(\u0027cancelled interval timer\u0027)\n\t\tclearInterval(timer)\n\t\ttimer = null\n\t} else if (state === \u0027waiting\u0027 || state === \u0027paused\u0027) {\n\t\tsetTimeout(() =\u003E tick(false))\n\t}\n}\n\nlet game_completed: boolean\n$: {\n\t// console.log(\u0027updating game_completed\u0027, current_stage)\n\tgame_completed = (state !== \u0027playing\u0027 || current_stage == null) ? false\n\t: (current_stage.type === \u0027complete\u0027)\n}\n\nlet internal_state: GameConfig[\u0027state\u0027] | \u0027completed\u0027\n$: internal_state = game_completed ? \u0027completed\u0027 : state\n\nlet bar_width = 0\n$: bar_width = current_stage == null ? 0\n\t: state === \u0027waiting\u0027 ? 0\n\t: current_stage.type === \u0027complete\u0027 ? 100\n\t: 100 * offset_sec / current_stage.duration\n\nlet stage_label: string\n$: stage_label = internal_state === \u0027waiting\u0027 ? \u0027Waiting for game to start\u0027\n\t: current_stage == null ? \u0027unknown\u0027 : current_stage.label\n\n// const order = [\u0027meditate\u0027, \u0027bead\u0027, \u0027complete\u0027]\n// const class_for = (x: number): string =\u003E x \u003C 0 ? \u0027done\u0027\n// \t: x \u003E 0 ? \u0027waiting\u0027\n// \t: \u0027active\u0027\n\n// const progress_class = (stage: GameStage, type: string, r?: number, p?: number): string =\u003E {\n// \tif (stage == null) return \u0027\u0027\n\n// \tconst current_o = order.indexOf(stage.type)\n// \tconst element_o = order.indexOf(type)\n\n// \t// const o_diff = element_o - current_o\n// \treturn type === \u0027bead\u0027 \u0026\u0026 stage.type === \u0027bead\u0027\n// \t\t? (r === stage.r ? class_for(p - stage.p) : class_for(r - stage.r))\n// \t\t: class_for(element_o - current_o)\n// }\n\n// This will get more complex in time. For now, pause the game to fiddle.\n$: settings_disabled = state === \u0027playing\u0027\n\nlet config_open = false\n\n$: if (_magister === true) config_open = true\n\n// The first user has the config open by default.\n// $: if (_active_sessions === 1) config_open = true\n\n// The magister box is fully visible once there\u0027s a critical mass of players in the room\n$: magister_opaque = _magister === true || _active_sessions \u003E= 6\n\n\u003C/script\u003E\n\n\u003Csvelte:head\u003E\n\t{#if _magister}\n\t\t\u003Cstyle\u003E\nbody {\n\tbackground-color: var(--bg-highlight);\n}\n\t\t\u003C/style\u003E\n\t{/if}\n\u003C/svelte:head\u003E\n\n\u003C!-- \u003Cmain class:magister={_magister}\u003E --\u003E\n\u003Cmain\u003E\n\t\u003Caudio bind:this={round_audio} src=\u0022/lo-metal-tone.mp3\u0022 preload=\u0022auto\u0022\u003E\u003Ctrack kind=\u0022captions\u0022\u003E\u003C/audio\u003E\n\t\u003Caudio bind:this={complete_audio} src=\u0022/hi-metal-tone.mp3\u0022 preload=\u0022auto\u0022\u003E\u003Ctrack kind=\u0022captions\u0022\u003E\u003C/audio\u003E\n\n\t{#if internal_state === \u0027loading\u0027}\n\t\t\u003Ch1\u003ELoading game state\u003C/h1\u003E\n\t{:else}\n\t\t\u003C!-- \u003Ch1\u003EGlass Bead Game Timer\u003C/h1\u003E --\u003E\n\t\t\u003C!-- \u003Ch1\u003E{topic}\u003C/h1\u003E --\u003E\n\n\t\t\u003Cdiv id=\u0027topicimg\u0027 bind:this={topic_img}\u003E{game_config.topic}\u003C/div\u003E\n\n\t\t\u003Ch1\u003E{stage_label}\u003C/h1\u003E\n\t\t\u003Cdiv id=\u0027progresscontainer\u0027\u003E\n\t\t\t\u003Cdiv id=\u0027progress_time\u0027\u003E{((internal_state === \u0027playing\u0027 || internal_state === \u0027paused\u0027) \u0026\u0026 current_stage) ? current_stage.duration - offset_sec : \u0027\u0027}\u003C/div\u003E\n\t\t\t\u003Cdiv id=\u0027progress\u0027 style=\u0027width: {bar_width}%\u0027\u003E\u003C/div\u003E\n\t\t\u003C/div\u003E\n\n\t\t{#if (_magister == null || _magister == true)}\n\t\t\t{#if internal_state == \u0027waiting\u0027}\n\t\t\t\t\u003Cbutton on:click={upd(\u0027state\u0027, \u0027playing\u0027)}\u003EStart\u003C/button\u003E\n\t\t\t{:else if internal_state == \u0027playing\u0027}\n\t\t\t\t\u003Cbutton on:click={upd(\u0027state\u0027, \u0027paused\u0027)}\u003EPause\u003C/button\u003E\n\t\t\t{:else if internal_state == \u0027paused\u0027}\n\t\t\t\t\u003Cbutton on:click={upd(\u0027state\u0027, \u0027playing\u0027)}\u003EResume\u003C/button\u003E\n\t\t\t{/if}\n\t\t{/if}\n\n\t\t\u003Cdiv style=\u0027height: 400px;\u0027\u003E\u003C/div\u003E\n\n\t\t\u003Cdetails\u003E\n\t\t\t\u003C!-- I\u0027m not ready to delete these UI elements but we might not use them --\u003E\n\t\t\t\u003Csummary\u003EInfo\u003C/summary\u003E\n\n\t\t\t\u003Ch1\u003E{game_config.topic}\u003C/h1\u003E\n\t\t\t\u003Ch4\u003ERoom: \u003Cem\u003E{room}\u003C/em\u003E \u003Ca href=\u0022../..\u0022\u003E(leave)\u003C/a\u003E\u003C/h4\u003E\n\n\t\t\t\u003Cdiv\u003E\n\t\t\t\t{state === \u0027waiting\u0027 ? \u0027Waiting for the game to start\u0027\n\t\t\t\t: state === \u0027paused\u0027 ? \u0027GAME PAUSED\u0027\n\t\t\t\t: state === \u0027playing\u0027 ? \u0027Game in progress\u0027\n\t\t\t\t: \u0027\u0027}\n\t\t\t\u003C/div\u003E\n\t\t\t{#if connection !== \u0027connected\u0027}\n\t\t\t\t\u003Cdiv\u003EDISCONNECTED FROM GAME SERVER\u003C/div\u003E\n\t\t\t{:else}\n\t\t\t\t{#if _active_sessions == 1}\n\t\t\t\t\t\u003Cdiv\u003EYou are alone in the room\u003C/div\u003E\n\t\t\t\t{:else}\n\t\t\t\t\t\u003Cdiv\u003E{_active_sessions} players are in this room\u003C/div\u003E\n\t\t\t\t{/if}\n\t\t\t{/if}\n\t\n\t\t\t\u003Cdiv id=\u0027rounds\u0027\u003E\n\t\t\t\t\u003Ch2\u003EGame\u003C/h2\u003E\n\t\t\t\t{#if game_config.meditate}\n\t\t\t\t\t\u003Cdiv\u003E\n\t\t\t\t\t\t\u003C!-- \u003Cspan class={progress_class(current_stage, \u0027meditate\u0027)}\u003EMeditation (1 min)\u003C/span\u003E --\u003E\n\t\t\t\t\t\t\u003Cspan\u003EMeditation (1 min)\u003C/span\u003E\n\t\t\t\t\t\u003C/div\u003E\n\t\t\t\t{/if}\n\t\t\t\t{#each Array(Math.max(game_config.rounds, 0)) as _, r}\n\t\t\t\t\t\u003Cdiv\u003ERound {r\u002B1}:\n\t\t\t\t\t\t{#each Array(Math.max(game_config.players, 0)) as _, p}\n\t\t\t\t\t\t\t\u003C!-- \u003Cspan class={\u0027bead \u0027 \u002B progress_class(current_stage, \u0027bead\u0027, r, p)}\u003E{p\u002B1} \u003C/span\u003E --\u003E\n\t\t\t\t\t\t\t\u003Cspan\u003E{p\u002B1} \u003C/span\u003E\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t\u003C/div\u003E\n\t\t\t\t{/each}\n\t\t\t\u003C/div\u003E\n\t\n\t\t\u003C/details\u003E\n\n\t\t{#if _magister == null || _magister == true}\n\t\t\t\u003Cdetails class=\u0027config\u0027 bind:open={config_open}\u003E\n\t\t\t\t\u003Csummary\u003EGame controls\u003C/summary\u003E\n\n\t\t\t\t\u003Cp\u003E\n\t\t\t\t\t{#if _magister == null}\n\t\t\t\t\t\tThis will effect all players. Will you borrow power? Will you steal it?\n\t\t\t\t\t{:else}\n\t\t\t\t\t\tYou are master of the games. These controls are yours alone.\n\t\t\t\t\t{/if}\n\t\t\t\t\u003C/p\u003E\n\n\t\t\t\t{#if internal_state == \u0027waiting\u0027}\n\t\t\t\t\t\u003Cbutton on:click={upd(\u0027state\u0027, \u0027playing\u0027)}\u003EStart\u003C/button\u003E\n\t\t\t\t{:else if internal_state == \u0027playing\u0027}\n\t\t\t\t\t\u003Cbutton on:click={upd(\u0027state\u0027, \u0027paused\u0027)}\u003EPause\u003C/button\u003E\n\t\t\t\t{:else if internal_state == \u0027paused\u0027}\n\t\t\t\t\t\u003Cbutton on:click={upd(\u0027state\u0027, \u0027playing\u0027)}\u003EResume\u003C/button\u003E\n\t\t\t\t{/if}\n\n\t\t\t\t{#if internal_state == \u0027paused\u0027 || internal_state == \u0027completed\u0027 }\n\t\t\t\t\t\u003Cbutton on:click={upd(\u0027state\u0027, \u0027waiting\u0027)}\u003ERestart game\u003C/button\u003E\n\t\t\t\t{/if}\n\n\t\t\t\t\u003Clabel\u003E\n\t\t\t\t\t\u003Cspan\u003ETopic\u003C/span\u003E\n\t\t\t\t\t\u003Cinput disabled={settings_disabled} type=\u0027text\u0027 value={game_config.topic} on:input={config(\u0027topic\u0027)} list=\u0027archetopics\u0027 \u003E\n\t\t\t\t\t\u003Cdatalist id=\u0027archetopics\u0027\u003E\n\t\t\t\t\t\t{#each ARCHETOPICS as topic}\n\t\t\t\t\t\t\t\u003Coption value={topic}\u003E\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t\u003C/datalist\u003E\n\t\t\t\t\u003C/label\u003E\n\n\t\t\t\t\u003Clabel\u003E\n\t\t\t\t\t\u003Cspan\u003EPre-game meditation\u003C/span\u003E\n\t\t\t\t\t\u003Cinput disabled={settings_disabled} type=\u0027checkbox\u0027 checked={game_config.meditate} on:input={config(\u0027meditate\u0027)} \u003E\n\t\t\t\t\u003C/label\u003E\n\n\t\t\t\t\u003Clabel\u003E\n\t\t\t\t\t\u003Cspan\u003EPost game contemplation\u003C/span\u003E\n\t\t\t\t\t\u003Cinput disabled={settings_disabled} type=\u0027checkbox\u0027 checked={game_config.contemplation} on:input={config(\u0027contemplation\u0027)} \u003E\n\t\t\t\t\u003C/label\u003E\n\n\t\t\t\t\u003Clabel\u003E\n\t\t\t\t\t\u003Cspan\u003ENumber of players\u003C/span\u003E\n\t\t\t\t\t\u003Cinput disabled={settings_disabled} type=\u0027number\u0027 pattern=\u0027[0-9]*\u0027 value={game_config.players} on:input={config(\u0027players\u0027)} min=1 max=12 \u003E\n\t\t\t\t\u003C/label\u003E\n\n\t\t\t\t\u003Clabel\u003E\n\t\t\t\t\t\u003Cspan\u003ENumber of rounds\u003C/span\u003E\n\t\t\t\t\t\u003Cinput disabled={settings_disabled} type=\u0027number\u0027 pattern=\u0027[0-9]*\u0027 value={game_config.rounds} on:input={config(\u0027rounds\u0027)} min=1 max=20\u003E\n\t\t\t\t\u003C/label\u003E\n\n\t\t\t\t\u003Clabel\u003E\n\t\t\t\t\t\u003Cspan\u003ESeconds per bead\u003C/span\u003E\n\t\t\t\t\t\u003Cinput disabled={settings_disabled} type=\u0027number\u0027 pattern=\u0027[0-9]*\u0027 value={game_config.seconds_per_bead} on:input={config(\u0027seconds_per_bead\u0027)}\u003E\n\t\t\t\t\u003C/label\u003E\n\n\t\t\t\t\u003Clabel\u003E\n\t\t\t\t\t\u003Cspan\u003ESeconds between beads\u003C/span\u003E\n\t\t\t\t\t\u003Cinput disabled={settings_disabled} type=\u0027number\u0027 pattern=\u0027[0-9]*\u0027 value={game_config.seconds_between_bead} on:input={config(\u0027seconds_between_bead\u0027)}\u003E\n\t\t\t\t\u003C/label\u003E\n\n\t\t\t\t\u003Cdiv style=\u0027margin-top: 1em;\u0027\u003E\n\t\t\t\t\t(Total game length: {roundish(\n\t\t\t\t\t\tgame_stages.reduce((x, s) =\u003E x \u002B s.duration, 0) / 60\n\t\t\t\t\t)} minutes)\n\t\t\t\t\u003C/div\u003E\n\n\t\t\t\t\u003Cdiv id=\u0027magister_box\u0027 class:magister_opaque\u003E\n\t\t\t\t\t{#if _magister == null}\n\t\t\t\t\t\t\u003Cbutton on:click={upd(\u0027_magister\u0027, true)}\u003EAssume the mantle of Magister Ludi\u003C/button\u003E\n\t\t\t\t\t\t\u003Cp\u003E\u003Ci\u003EAdvanced - for large games\u003C/i\u003E\u003C/p\u003E\n\t\t\t\t\t\t\u003Cp\u003EWhen present, the Magister Ludi (master of the games) has exclusive control of the game.\u003C/p\u003E\n\t\t\t\t\t{:else if _magister == true}\n\t\t\t\t\t\t\u003Cbutton on:click={upd(\u0027_magister\u0027, null)}\u003EAbdicate Magister Ludi status\u003C/button\u003E\n\t\t\t\t\t\t\u003Cp\u003EYou are the master of the games. You have exclusive control over playing, pausing and configuring this game.\u003C/p\u003E\n\t\t\t\t\t\t\u003Cp\u003EDo not close this browser window or you will be dethroned.\u003C/p\u003E\n\t\t\t\t\t{/if}\n\t\t\t\t\u003C/div\u003E\n\t\t\t\u003C/details\u003E\n\t\t{:else}\n\t\t\t\u003Cp class=\u0027config\u0027\u003EMagister Ludi is managing this game.\u003C/p\u003E\n\t\t{/if}\n\t{/if}\n\u003C/main\u003E\n\n\u003Cstyle\u003E\n\nmain {\n\t/* margin-bottom: 3em; */\n\ttext-align: center;\n}\n\n#topicimg {\n\twidth: 300px;\n\tdisplay: inline-block;\n}\n\n/* .magister {\n\tbackground-color: var(--bg-highlight);\n} */\n\nh1 {\n\tmargin-top: 1em;\n}\n\n#progresscontainer {\n\t/* width: calc(100% - 50px); */\n\tposition: relative;\n\tmargin: 25px;\n\theight: 5em;\n\tborder: 2px solid var(--fg-color);\n}\n\n#progress_time {\n\tposition: absolute;\n\t/* color: red; */\n\t/* font-size: var(--bg-color); */\n\tcolor: white;\n\t/* color: white; */\n\tfont-size: 54px;\n\tmargin-left: 5px;\n\tmix-blend-mode: difference;\n}\n\n#progress {\n\tbackground-color: var(--fg-color);\n\t/* width: 50%; */\n\theight: 100%;\n\t/* transition: width 1s linear; */\n}\n\n\n/* .bead {\n\tmargin-right: 1em;\n\tpadding: 2px 4px;\n}\n.done {\n\ttext-decoration: line-through;\n\tcolor: #888;\n} */\n/* .waiting {\n\tcolor: #888;\n} */\n/* .active {\n\tbackground-color: var(--fg-color);\n\tcolor: var(--bg-color);\n} */\n\n/***** Game config *****/\n.config {\n\tmargin-top: 2em;\n}\n\nsummary {\n\ttext-decoration: underline;\n\tcursor: pointer;\n}\n\nbutton {\n\tfont-size: 140%;\n\tmargin: 10px 0;\n\tcolor: var(--bg-color);\n\t/* color: var(--fg-color); */\n}\n\ndetails \u003E :first-child {\n\tmargin-bottom: 1em;\n}\n\nlabel {\n\tmargin-bottom: 3px;\n}\nlabel \u003E :first-child {\n\tdisplay: inline-block;\n\tmin-width: 14em;\n}\n\ninput {\n\twidth: 7em;\n\tfont-size: 16px;\n\t/* color: var(--bg-color); */\n\tborder: 2px solid #686868;\n}\n\ninput[type=checkbox] {\n\theight: 1em;\n}\n\nlabel {\n\tdisplay: block;\n}\n\n#magister_box {\n\tborder: 1px dashed var(--fg-color);\n\t/* margin: 1em 0; */\n\tmargin: 1em auto;\n,\n\tid: string?,\n\t\t\t\tid: \u0060${r} ${p}\u0060s  | any // Timeout? \u0026\u0026 \n\t\tlet changed = new_stage == null || current_stacurrent_stage == null || new_stage.id !== currcurrent_stage.id\n\t\t// Hotfix \u0026\u0026 cheanged null | |  \\\\ == null || current_stage.id == null !== new_stage.id \n\t\tconsole.log(new_stage, current_stage, changed)\n\t\t\n\t\t\t\t// Hotfix\n\t\tlet changed = new_stage == null || current_stage == null || new_stage.id == null || current_stage.id == null || current_stage.id !== new_stage.id\n\t\tconsole.log(new_stage, current_stage, changed)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: game_config.players \u003E 1 ? \u0060Round ${r\u002B1} player ${p\u002B1}\u0060 : \u0060Round ${r\u002B1}\u0060,\n// \u0027\u0027\t\t\t\tlabel: game_config.players \u003E 1 ? \u0060Round ${r\u002B1} player ${p\u002B1}\u0060 : \u0060Round ${r\u002B1}\u0060,\n\ttype: \u0027waiting\u0027 | \u0027bead\u0027 | \u0027breath\u0027 | \u0027meditate\u0027 | \u0027contemplation\u0027 | \u0027complete\u0027,\n\tduration: number,\n\tno_sound?: true,\n\tr?: number, p?: number,\n\tid?: string\n}\n\nlet game_stages: GameStage[] = []\n$: {\n\tgame_stages = [{\n\t\tlabel: \u0060${game_config.meditate ? \u0027Meditation\u0027 : \u0027Game\u0027} is about to start\u0060,\n\t\ttype: \u0027waiting\u0027,\n\t\tduration: 3,\n\t\tno_sound: true\n\t}]\n\tif (game_config.meditate) game_stages.push({\n\t\tlabel: \u0027Meditate\u0027,\n\t\ttype: \u0027meditate\u0027,\n\t\tduration: MEDITATION_SECONDS,\n\t})\n\tfor (let r = 0; r \u003C game_config.rounds; r\u002B\u002B) {\n\t\tfor (let p = 0; p \u003C game_config.players; p\u002B\u002B) {\n\t\t\tif (game_config.seconds_between_bead \u0026\u0026 (r \u003E 0 || p \u003E 0)) game_stages.push({\n\t\t\t\tlabel: \u0027Breathe\u0027,\n\t\t\t\tduration: game_config.seconds_between_bead,\n\t\t\t\ttype: \u0027breath\u0027,\n\t\t\t\tid: \u0060b ${r} ${p}\u0060\n\t\t\t})\n\n\t\t\tgame_stages.push({\n\t\t\t\tlabel: game_config.players \u003E 1 ? \u0060Round ${r\u002B1} player ${p\u002B1}\u0060 : \u0060Round ${r\u002B1}\u0060,\n\t\t\t\tduration: game_config.seconds_per_bead,\n\t\t\t\ttype: \u0027bead\u0027, r, p,\n\t\t\t\tid: \u0060s ${r} ${p}\u0060\n\t\t\t})\n\t\t}\n\t}\n\n\tif (game_config.contemplation) game_stages.push({\n\t\tlabel: \u0022Contemplate the game\u0027s passing\u0022,\n\t\ttype: \u0027contemplation\u0027,\n\t\tduration: MEDITATION_SECONDS,\n\t})\n\n\n\tconsole.log(\u0027game stages\u0027, game_stages, game_config.seconds_between_bead)\n}\n\nlet total_game_length: number\n$: total_game_length = game_stages.reduce((x, s) =\u003E x \u002B s.duration, 0)\n\n// Used for the overall game progress indicator.\nlet inner_game_stages: GameStage[]\n$: inner_game_stages = game_stages.filter(s =\u003E s.type === \u0027breath\u0027 || s.type === \u0027bead\u0027)\nlet inner_game_length: number\n$: inner_game_length = inner_game_stages.reduce((x, s) =\u003E x \u002B s.duration, 0)\n\n// TODO: The protocol for these update methods doesn\u0027t use game_state properly.\nconst update_state = async (patch: Record\u003Cstring, string | number | boolean | null\u003E) =\u003E {\n\tawait fetch(\u0060${room}/configure\u0060, {\n\t\tmethod: \u0027POST\u0027,\n\t\tmode: \u0027same-origin\u0027,\n\t\theaders: {\n\t\t\t\u0027content-type\u0027: \u0027application/json\u0027,\n\t\t},\n\t\tbody: JSON.stringify(patch)\n\t})\n}\n\nconst upd = (k: string, v: string | number | boolean | null) =\u003E () =\u003E update_state({[k]: v})\n\nconst config = (k: string): svelte.JSX.FormEventHandler\u003CHTMLInputElement\u003E =\u003E (e) =\u003E {\n\t// console.log(\u0027k\u0027, k, e.data, e.value, e.target.value, e.target.type)\n\tconst target = e.target as HTMLInputElement\n\tconst raw_value = target.value\n\tconst value = target.type === \u0027number\u0027 ? ~~raw_value\n\t\t: target.type === \u0027checkbox\u0027 ? target.checked\n\t\t: raw_value\n\tupdate_state({[k]: value})\n}\n\nconst roundish = (x: number) =\u003E Math.round(x * 10) / 10\n\n\nconst waiting_stage: GameStage = { label: \u0027Waiting for game to start\u0027, type: \u0027waiting\u0027, duration: Infinity }\nconst complete_stage: GameStage = { label: \u0027Game complete\u0027, type: \u0027complete\u0027, duration: Infinity }\nconst get_current_stage = (offset_ms: number): {stage: GameStage, stage_idx: number, offset_sec: number} =\u003E {\n\tif (state === \u0027waiting\u0027) return {stage: waiting_stage, stage_idx: -1, offset_sec: 0}\n\n\tlet offset_sec = Math.round(offset_ms / 1000)\n\tfor (let s = 0; s \u003C game_stages.length; s\u002B\u002B) {\n\t\tlet stage = game_stages[s]\n\t\tif (stage.duration \u003E offset_sec) {\n\t\t\treturn {stage, stage_idx: s, offset_sec}\n\t\t}\n\t\toffset_sec -= stage.duration\n\t}\n\treturn {\n\t\tstage: complete_stage, stage_idx: game_stages.length, offset_sec\n\t}\n}\n\n// Urgh kinda ugly storing state for both the index and stage itself. Better to\n// have one derive the other.\nlet current_stage: GameStage | null = null, current_stage_idx: number = -1, offset_sec: number\n$: console.log(\u0027current stage\u0027, current_stage)\n// $: console.log(\u0027idx\u0027, current_stage_idx)\n\nconst tick = (play_audio: boolean) =\u003E {\n\tconsole.log(\u0027tick\u0027)\n\t// console.log(\u0027state\u0027, state, \u0027completed\u0027, state \u0026\u0026 state.complete)\n\n\tconst time = state === \u0027playing\u0027 ? Date.now() \u002B _clock_offset - game_config.start_time\n\t\t: state === \u0027paused\u0027 ? game_config.paused_progress!\n\t\t: 0\n\tconst {stage: new_stage, stage_idx: new_stage_idx, offset_sec: new_offs} = get_current_stage(time)\n\t// state_label = state.label\n\n\toffset_sec = new_offs\n\tif (new_stage !== current_stage) {\n\t\tconsole.log(\u0027state changed\u0027, new_stage.label, new_stage.type === \u0027complete\u0027)\n\n\t\t// This happens sometimes with other kinds of configuration changes -\n\t\t// eg if a user enters or leaves the room, or the room is reconfigured.\n\t\t// Only make a sound if the *stage* changes.\n\t\tlet changed = current_stage == null || (new_stage.id ?? new_stage.type) !== (current_stage.id ?? current_stage.type)\n\t\t// console.log(new_stage, current_stage, changed)\n\n\t\tcurrent_stage = new_stage\n\t\tcurrent_stage_idx = new_stage_idx\n\t\t// completed = new_game_state.complete\n\t\t// if (!state.complete) round_audio.play()\n\n\t\tif (play_audio \u0026\u0026 !new_stage.no_sound \u0026\u0026 changed) {\n\t\t\tif (current_stage.type === \u0027complete\u0027 || current_stage.type === \u0027contemplation\u0027) complete_audio.play()\n\t\t\telse round_audio.play()\n\t\t}\n\t}\n}\n\nlet timer: number | null | any // Timeout?\n$: {\n\t// Sadly we can\u0027t use internal_state here because it generates a cyclic dependancy.\n\tlet completed = current_stage ? current_stage.type === \u0027complete\u0027 : false\n\t// console.log(\u0027xx\u0027, state, timer, completed, current_stage)\n\n\t// if (state !== \u0027loading\u0027) tick(false)\n\n\tif (state === \u0027playing\u0027 \u0026\u0026 timer == null \u0026\u0026 !completed) {\n\t\t// setTimeout needed to get around some weird race condition.\n\t\t// There\u0027s probably better ways to structure this :/\n\t\tsetTimeout(() =\u003E tick(false))\n\t\ttimer = setInterval(() =\u003E {\n\t\t\ttick(true)\n\t\t}, 1000)\n\t} else if ((completed || state !== \u0027playing\u0027) \u0026\u0026 timer != null) {\n\t\tconsole.log(\u0027cancelled interval timer\u0027)\n\t\tclearInterval(timer)\n\t\ttimer = null\n\t} else if (state === \u0027waiting\u0027 || state === \u0027paused\u0027) {\n\t\tsetTimeout(() =\u003E tick(false))\n\t}\n}\n\nlet game_completed: boolean\n$: {\n\t// console.log(\u0027updating game_completed\u0027, current_stage)\n\tgame_completed = (state !== \u0027playing\u0027 || current_stage == null) ? false\n\t: (current_stage.type === \u0027complete\u0027)\n}\n\nlet internal_state: GameConfig[\u0027state\u0027] | \u0027completed\u0027\n$: internal_state = game_completed ? \u0027completed\u0027 : state\n\nlet bar_width = 0\n$: bar_width = current_stage == null ? 0\n\t: state === \u0027waiting\u0027 ? 0\n\t: current_stage.type === \u0027complete\u0027 ? 100\n\t: 100 * offset_sec / current_stage.duration\n\nlet stage_label: string\n$: stage_label = internal_state === \u0027waiting\u0027 ? \u0027Waiting for game to start\u0027\n\t: current_stage == null ? \u0027unknown\u0027 : current_stage.label\n\n\nconst progress_class = (stage_idx: number, baseline_idx: number): \u0027s-done\u0027 | \u0027s-active\u0027 | \u0027s-waiting\u0027 =\u003E {\n\tif (current_stage == null || baseline_idx \u003C 0) return \u0027s-waiting\u0027\n\n\treturn stage_idx \u003C baseline_idx ? \u0027s-done\u0027\n\t\t: stage_idx === baseline_idx ? \u0027s-active\u0027\n\t\t: \u0027s-waiting\u0027\n}\n\n// const order = [\u0027meditate\u0027, \u0027bead\u0027, \u0027complete\u0027]\n// const class_for = (x: number): string =\u003E x \u003C 0 ? \u0027done\u0027\n// \t: x \u003E 0 ? \u0027waiting\u0027\n// \t: \u0027active\u0027\n\n// const progress_class = (stage: GameStage, type: string, r?: number, p?: number): string =\u003E {\n// \tif (stage == null) return \u0027\u0027\n\n// \tconst current_o = order.indexOf(stage.type)\n// \tconst element_o = order.indexOf(type)\n\n// \t// const o_diff = element_o - current_o\n// \treturn type === \u0027bead\u0027 \u0026\u0026 stage.type === \u0027bead\u0027\n// \t\t? (r === stage.r ? class_for(p - stage.p) : class_for(r - stage.r))\n// \t\t: class_for(element_o - current_o)\n// }\n\n// This will get more complex in time. For now, pause the game to fiddle.\n$: settings_disabled = state === \u0027playing\u0027\n\nlet config_open = false\n\n$: if (_magister === true) config_open = true\n\n// The first user has the config open by default.\n// $: if (_active_sessions === 1) config_open = true\n\n// The magister box is fully visible once there\u0027s a critical mass of players in the room\n$: magister_opaque = _magister === true || _active_sessions \u003E= 6\n\n\u003C/script\u003E\n\n\u003Csvelte:head\u003E\n\t{#if _magister}\n\t\t\u003Cstyle\u003E\nbody {\n\tbackground-color: var(--bg-highlight);\n}\n\t\t\u003C/style\u003E\n\t{/if}\n\u003C/svelte:head\u003E\n\n\u003C!-- \u003Cmain class:magister={_magister}\u003E --\u003E\n\u003Cmain\u003E\n\t\u003Caudio bind:this={round_audio} src=\u0022/lo-metal-tone.mp3\u0022 preload=\u0022auto\u0022\u003E\u003Ctrack kind=\u0022captions\u0022\u003E\u003C/audio\u003E\n\t\u003Caudio bind:this={complete_audio} src=\u0022/hi-metal-tone.mp3\u0022 preload=\u0022auto\u0022\u003E\u003Ctrack kind=\u0022captions\u0022\u003E\u003C/audio\u003E\n\n\t{#if internal_state === \u0027loading\u0027}\n\t\t\u003Ch1\u003ELoading game state\u003C/h1\u003E\n\t{:else}\n\t\t\u003C!-- \u003Ch1\u003EGlass Bead Game Timer\u003C/h1\u003E --\u003E\n\t\t\u003C!-- \u003Ch1\u003E{topic}\u003C/h1\u003E --\u003E\n\n\t\t\u003Cdiv id=\u0027topicimg\u0027 bind:this={topic_img}\u003E{game_config.topic}\u003C/div\u003E\n\n\t\t\u003Ch1\u003E{stage_label}\u003C/h1\u003E\n\t\t\u003Cdiv id=\u0027progresscontainer\u0027\u003E\n\t\t\t\u003Cdiv id=\u0027progress_time\u0027\u003E{((internal_state === \u0027playing\u0027 || internal_state === \u0027paused\u0027) \u0026\u0026 current_stage) ? current_stage.duration - offset_sec : \u0027\u0027}\u003C/div\u003E\n\t\t\t\u003Cdiv id=\u0027progress\u0027 style=\u0027width: {bar_width}%\u0027\u003E\u003C/div\u003E\n\t\t\u003C/div\u003E\n\n\t\t\u003Cdiv id=\u0027gameprogress\u0027\u003E\n\t\t\t{#each game_stages as s, i}\n\t\t\t\t{#if s.type === \u0027bead\u0027 || s.type === \u0027breath\u0027}\n\t\t\t\t\t\u003Cspan class={\u0027prog-\u0027 \u002B s.type \u002B \u0027 \u0027 \u002B progress_class(i, current_stage_idx)} style=\u0027width: {100 * s.duration / inner_game_length}%\u0027\u003E\u003C/span\u003E\n\t\t\t\t{/if}\n\t\t\t{/each}\n\t\t\u003C/div\u003E\n\n\t\t{#if (_magister == null || _magister == true)}\n\t\t\t{#if internal_state == \u0027waiting\u0027}\n\t\t\t\t\u003Cbutton on:click={upd(\u0027state\u0027, \u0027playing\u0027)}\u003EStart\u003C/button\u003E\n\t\t\t{:else if internal_state == \u0027playing\u0027}\n\t\t\t\t\u003Cbutton on:click={upd(\u0027state\u0027, \u0027paused\u0027)}\u003EPause\u003C/button\u003E\n\t\t\t{:else if internal_state == \u0027paused\u0027}\n\t\t\t\t\u003Cbutton on:click={upd(\u0027state\u0027, \u0027playing\u0027)}\u003EResume\u003C/button\u003E\n\t\t\t{/if}\n\t\t{/if}\n\n\t\t\u003Cdiv style=\u0027height: 400px;\u0027\u003E\u003C/div\u003E\n\n\t\t\u003Cdetails\u003E\n\t\t\t\u003C!-- I\u0027m not ready to delete these UI elements but we might not use them --\u003E\n\t\t\t\u003Csummary\u003EInfo\u003C/summary\u003E\n\n\t\t\t\u003Ch1\u003E{game_config.topic}\u003C/h1\u003E\n\t\t\t\u003Ch4\u003ERoom: \u003Cem\u003E{room}\u003C/em\u003E \u003Ca href=\u0022../..\u0022\u003E(leave)\u003C/a\u003E\u003C/h4\u003E\n\n\t\t\t\u003Cdiv\u003E\n\t\t\t\t{state === \u0027waiting\u0027 ? \u0027Waiting for the game to start\u0027\n\t\t\t\t: state === \u0027paused\u0027 ? \u0027GAME PAUSED\u0027\n\t\t\t\t: state === \u0027playing\u0027 ? \u0027Game in progress\u0027\n\t\t\t\t: \u0027\u0027}\n\t\t\t\u003C/div\u003E\n\t\t\t{#if connection !== \u0027connected\u0027}\n\t\t\t\t\u003Cdiv\u003EDISCONNECTED FROM GAME SERVER\u003C/div\u003E\n\t\t\t{:else}\n\t\t\t\t{#if _active_sessions == 1}\n\t\t\t\t\t\u003Cdiv\u003EYou are alone in the room\u003C/div\u003E\n\t\t\t\t{:else}\n\t\t\t\t\t\u003Cdiv\u003E{_active_sessions} players are in this room\u003C/div\u003E\n\t\t\t\t{/if}\n\t\t\t{/if}\n\n\t\t\t\u003Cdiv id=\u0027rounds\u0027\u003E\n\t\t\t\t\u003Ch2\u003EGame\u003C/h2\u003E\n\t\t\t\t{#if game_config.meditate}\n\t\t\t\t\t\u003Cdiv\u003E\n\t\t\t\t\t\t\u003C!-- \u003Cspan class={progress_class(current_stage, \u0027meditate\u0027)}\u003EMeditation (1 min)\u003C/span\u003E --\u003E\n\t\t\t\t\t\t\u003Cspan\u003EMeditation (1 min)\u003C/span\u003E\n\t\t\t\t\t\u003C/div\u003E\n\t\t\t\t{/if}\n\t\t\t\t{#each Array(Math.max(game_config.rounds, 0)) as _, r}\n\t\t\t\t\t\u003Cdiv\u003ERound {r\u002B1}:\n\t\t\t\t\t\t{#each Array(Math.max(game_config.players, 0)) as _, p}\n\t\t\t\t\t\t\t\u003C!-- \u003Cspan class={\u0027bead \u0027 \u002B progress_class(current_stage, \u0027bead\u0027, r, p)}\u003E{p\u002B1} \u003C/span\u003E --\u003E\n\t\t\t\t\t\t\t\u003Cspan\u003E{p\u002B1} \u003C/span\u003E\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t\u003C/div\u003E\n\t\t\t\t{/each}\n\t\t\t\u003C/div\u003E\n\n\t\t\u003C/details\u003E\n\n\t\t{#if _magister == null || _magister == true}\n\t\t\t\u003Cdetails class=\u0027config\u0027 bind:open={config_open}\u003E\n\t\t\t\t\u003Csummary\u003EGame controls\u003C/summary\u003E\n\n\t\t\t\t\u003Cp\u003E\n\t\t\t\t\t{#if _magister == null}\n\t\t\t\t\t\tThis will effect all players. Will you borrow power? Will you steal it?\n\t\t\t\t\t{:else}\n\t\t\t\t\t\tYou are master of the games. These controls are yours alone.\n\t\t\t\t\t{/if}\n\t\t\t\t\u003C/p\u003E\n\n\t\t\t\t{#if internal_state == \u0027waiting\u0027}\n\t\t\t\t\t\u003Cbutton on:click={upd(\u0027state\u0027, \u0027playing\u0027)}\u003EStart\u003C/button\u003E\n\t\t\t\t{:else if internal_state == \u0027playing\u0027}\n\t\t\t\t\t\u003Cbutton on:click={upd(\u0027state\u0027, \u0027paused\u0027)}\u003EPause\u003C/button\u003E\n\t\t\t\t{:else if internal_state == \u0027paused\u0027}\n\t\t\t\t\t\u003Cbutton on:click={upd(\u0027state\u0027, \u0027playing\u0027)}\u003EResume\u003C/button\u003E\n\t\t\t\t{/if}\n\n\t\t\t\t{#if internal_state == \u0027paused\u0027 || internal_state == \u0027completed\u0027 }\n\t\t\t\t\t\u003Cbutton on:click={upd(\u0027state\u0027, \u0027waiting\u0027)}\u003ERestart game\u003C/button\u003E\n\t\t\t\t{/if}\n\n\t\t\t\t\u003Clabel\u003E\n\t\t\t\t\t\u003Cspan\u003ETopic\u003C/span\u003E\n\t\t\t\t\t\u003Cinput disabled={settings_disabled} type=\u0027text\u0027 value={game_config.topic} on:input={config(\u0027topic\u0027)} list=\u0027archetopics\u0027 \u003E\n\t\t\t\t\t\u003Cdatalist id=\u0027archetopics\u0027\u003E\n\t\t\t\t\t\t{#each ARCHETOPICS as topic}\n\t\t\t\t\t\t\t\u003Coption value={topic}\u003E\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t\u003C/datalist\u003E\n\t\t\t\t\u003C/label\u003E\n\n\t\t\t\t\u003Clabel\u003E\n\t\t\t\t\t\u003Cspan\u003EPre-game meditation\u003C/span\u003E\n\t\t\t\t\t\u003Cinput disabled={settings_disabled} type=\u0027checkbox\u0027 checked={game_config.meditate} on:input={config(\u0027meditate\u0027)} \u003E\n\t\t\t\t\u003C/label\u003E\n\n\t\t\t\t\u003Clabel\u003E\n\t\t\t\t\t\u003Cspan\u003EPost game contemplation\u003C/span\u003E\n\t\t\t\t\t\u003Cinput disabled={settings_disabled} type=\u0027checkbox\u0027 checked={game_config.contemplation} on:input={config(\u0027contemplation\u0027)} \u003E\n\t\t\t\t\u003C/label\u003E\n\n\t\t\t\t\u003Clabel\u003E\n\t\t\t\t\t\u003Cspan\u003ENumber of players\u003C/span\u003E\n\t\t\t\t\t\u003Cinput disabled={settings_disabled} type=\u0027number\u0027 pattern=\u0027[0-9]*\u0027 value={game_config.players} on:input={config(\u0027players\u0027)} min=1 max=12 \u003E\n\t\t\t\t\u003C/label\u003E\n\n\t\t\t\t\u003Clabel\u003E\n\t\t\t\t\t\u003Cspan\u003ENumber of rounds\u003C/span\u003E\n\t\t\t\t\t\u003Cinput disabled={settings_disabled} type=\u0027number\u0027 pattern=\u0027[0-9]*\u0027 value={game_config.rounds} on:input={config(\u0027rounds\u0027)} min=1 max=20\u003E\n\t\t\t\t\u003C/label\u003E\n\n\t\t\t\t\u003Clabel\u003E\n\t\t\t\t\t\u003Cspan\u003ESeconds per bead\u003C/span\u003E\n\t\t\t\t\t\u003Cinput disabled={settings_disabled} type=\u0027number\u0027 pattern=\u0027[0-9]*\u0027 value={game_config.seconds_per_bead} on:input={config(\u0027seconds_per_bead\u0027)}\u003E\n\t\t\t\t\u003C/label\u003E\n\n\t\t\t\t\u003Clabel\u003E\n\t\t\t\t\t\u003Cspan\u003ESeconds between beads\u003C/span\u003E\n\t\t\t\t\t\u003Cinput disabled={settings_disabled} type=\u0027number\u0027 pattern=\u0027[0-9]*\u0027 value={game_config.seconds_between_bead} on:input={config(\u0027seconds_between_bead\u0027)}\u003E\n\t\t\t\t\u003C/label\u003E\n\n\t\t\t\t\u003Cdiv style=\u0027margin-top: 1em;\u0027\u003E\n\t\t\t\t\t(Total game length: {roundish(\n\t\t\t\t\t\tgame_stages.reduce((x, s) =\u003E x \u002B s.duration, 0) / 60\n\t\t\t\t\t)} minutes)\n\t\t\t\t\u003C/div\u003E\n\n\t\t\t\t\u003Cdiv id=\u0027magister_box\u0027 class:magister_opaque\u003E\n\t\t\t\t\t{#if _magister == null}\n\t\t\t\t\t\t\u003Cbutton on:click={upd(\u0027_magister\u0027, true)}\u003EAssume the mantle of Magister Ludi\u003C/button\u003E\n\t\t\t\t\t\t\u003Cp\u003E\u003Ci\u003EAdvanced - for large games\u003C/i\u003E\u003C/p\u003E\n\t\t\t\t\t\t\u003Cp\u003EWhen present, the Magister Ludi (master of the games) has exclusive control of the game.\u003C/p\u003E\n\t\t\t\t\t{:else if _magister == true}\n\t\t\t\t\t\t\u003Cbutton on:click={upd(\u0027_magister\u0027, null)}\u003EAbdicate Magister Ludi status\u003C/button\u003E\n\t\t\t\t\t\t\u003Cp\u003EYou are the master of the games. You have exclusive control over playing, pausing and configuring this game.\u003C/p\u003E\n\t\t\t\t\t\t\u003Cp\u003EDo not close this browser window or you will be dethroned.\u003C/p\u003E\n\t\t\t\t\t{/if}\n\t\t\t\t\u003C/div\u003E\n\t\t\t\u003C/details\u003E\n\t\t{:else}\n\t\t\t\u003Cp class=\u0027config\u0027\u003EMagister Ludi is managing this game.\u003C/p\u003E\n\t\t{/if}\n\t{/if}\n\u003C/main\u003E\n\n\u003Cstyle\u003E\n\nmain {\n\t/* margin-bottom: 3em; */\n\ttext-align: center;\n}\n\n#topicimg {\n\twidth: 300px;\n\tdisplay: inline-block;\n}\n\n/* .magister {\n\tbackground-color: var(--bg-highlight);\n} */\n\nh1 {\n\tmargin-top: 1em;\n}\n\n#progresscontainer {\n\t/* width: calc(100% - 50px); */\n\tposition: relative;\n\tmargin: 10px 25px;\n\theight: 5em;\n\tborder: 2px solid var(--fg-color);\n\t/* margin-bottom: 0; */\n}\n\n#progress_time {\n\tposition: absolute;\n\t/* color: red; */\n\t/* font-size: var(--bg-color); */\n\tcolor: white;\n\t/* color: white; */\n\tfont-size: 54px;\n\tmargin-left: 5px;\n\tmix-blend-mode: difference;\n}\n\n#progress {\n\tbackground-color: var(--fg-color);\n\t/* width: 50%; */\n\theight: 100%;\n\t/* transition: width 1s linear; */\n}\n\n#gameprogress {\n\t/* width: 300px; */\n\tmargin: 25px;\n\theight: 15px;\n\t/* background-color: blue; */\n\tmargin-top: 0;\n}\n\n#gameprogress \u003E span {\n\tdisplay: inline-block;\n\t/* height: 10px; */\n\tbackground-color: var(--fg-color);\n\t/* border-left: 1px solid var(--bg-color);\n\tborder-right: 1px solid var(--bg-color); */\n}\n\n/* .prog-waiting {\n\theight: 100%;\n} */\n/* .prog-meditate, .prog-contemplation {\n\theight: 50%;\n} */\n.prog-bead {\n\theight: 100%;\n}\n/* .prog-breath {\n} */\n\n.s-done {\n\topacity: 20%;\n}\n/* .s-active {\n\n} */\n.s-waiting {\n\topacity: 50%;\n\t\t\t\tlabel: \u0027\u0027,\n\t\t\t\t// label: game_config.players \u003E 1 ? \u0060Round ${r\u002B1} player ${p\u002B1}\u0060 : \u0060Round ${r\u002B1}\u0060,\n x\n\tmin-width: height1.25em; --\u003E\u003C!--  id=\u0027stagelabel\u0027\n\n#stagelabel {\n\t}\n\tmin-height: 1em;2\tmargin-top: 1em;\n\t\t\tmargin-top: 1em;.11.5 \u003E svg \u003E :global(svg)  \u003EIconsiconsimport * as topicIcons from \u0027./topicicons.json\u0027\nSpecialspecial\n\t\t\n\t\t\t\telse {\n\t\t\t\n\t\t\t\t\t}\t\t\tconst textContent = topicSptopicSpecial[\n\t\tconst topic = game_config.topic.toLocaleLowerCase()topictopic ] as keyof typeof topicIconstopicSptopicSpecial\n\t\t\tif (textContextContent) topic_imtopic_img.innerinnerText = textContetextContenteleeleeleeleele\n\t\t\t\n\t\t\n\t\t\t\u003Cdiv id=\u0022topic\u0027\u0027topicimg bind:this={topic_elem}img\u003E\u003C/div\u003E\n\t\t\t\u003Cdiv id=\u0027topicimg\u0027 bind:this={topic_img}\u003E\u003C/div\u003Elet topic_elem: HTMLElement\nimgtextmimg \u0026 \u0026 topic_textimgtext\t\t\t\u003Cdiv id=\u0027topicimg\u0027 bind:this={topic_img}\u003E\u003C/div\u003E\ntexttextimg#topicimg {\n\twidth: 300px;\n\tdisplay: inline-block;\n}\ntextpadding: 2em;\n\tfont-style: ititalic;\n\t\telse {\t\t\n\t\tif (svgContent) topic_img.innerHTML = svgContent\n\t\tconst svgContent = topicIcons[topic as keyof typeof topicIcons]\t\tconst svgContent = topicIcons[topic as keyof typeof topicIcons]\n\n\t\ti\n\t\telse \t\t\t{game_config.topic}topic_text = .innerinnerText{\n\t\t\t\n\t\t\ttopic_text.innerText = \u0027\u0027\n\t\t\t\t\t}\t\t} else if (textContent) topic_text.innerText = textContent{\n\t\t\t\t\t\ttopic_img.innerHTML = svgContent\n\t\t\ttopic_text.innerText = \u0027\u0027\n\t\t} else if (textContent) {\n\u0027\u0027\n\t\t\t\t\t}\t\t} else topic_text.innerText = game_config.topic{\n\t\t\t\n\t\t\t\t\t}\t\t\ttopic_img.innerHTML = \u0027\u0027\n\t\t\ttopic_text.innerText = textContent\n\t\t} else {\n5\n\tfonttext-size: font-sizefont-size: ;140%34./topicspecial\nconst randItem = (\u003CT\u003E(arr: T[]):  =\u003E t[t.\nconst randInt = (n: number) :  =\u003E MathMath.randomrandom() * nMath.floorfloor()randInt(arr.length)]\n\t;\u003CT\u003EamTfunction\u003CT\u003E{return }arrrandItem()\n\t\t\n\t\t\u003Cdiv\u003E id=fixaudio\u0027\u0027\u003C/div\u003EAudio muted. Click to ununmute\n\nfixaudio# {\n\t\n\t}\tborder: 1px soldiid whitewhitee;\n\tbg-cobackgroun-d0-color: var(--bg---bg-highlight);\n\tposition: fixed;\n\ttop: 1px;\n\twidth: 300px;\n\tmargin: 1em 2em;3padding1\n\tleft: 50%;\n\ttransform: trantranslateX()-50%; *//* \n\n\n\n\n\u002Blet audio_works = true\n\u002B\n\u002Bfunction test_audio() {\n\u002B\tlet a = new Audio()\n\u002B\ta.volume = 0.1\n\u002B\ta.src = \u0027/silence.mp3\u0027\n\u002B\ta.play().then(\n\u002B\t\t() =\u003E {\n\u002B\t\t\taudio_works = true\n\u002B\t\t\tconsole.log(\u0027Audio works\u0027)\n\u002B\t\t},\n\u002B\t\t() =\u003E {\n\u002B\t\t\taudio_works = false\n\u002B\t\t\tconsole.log(\u0027Audio does not work\u0027)\n\u002B\t\t}\n\u002B\t)\n\u002B}\n\u002Bfunction fix_audio(e) {\n\u002B\n\u002B// \tconsole.log(\u0027xx\u0027)\n\u002B\ttest_audio()\n\u002B}\n\u002BsetTimeout(test_audio, 0)\n\u002B\n// // // // \n\t\t{#if !audio_works}\t\n\t{/if}\tuuttbbuuttttoonn\n\tcolor: var(--fg--fg-color); *//*  *//*  onclickon:click={}fixaufix_audiofixxx\n\tz-index: 1;20.51\nconst n = randIntconst randfixed_rand = Math.randomrandom()fixed_rand2//  0 autpploplay\n\nconst rount --\u003E\u003C!-- \n\n\t\u003Caudio bind:this={round_audio} src=\u0022/lo-metal-tone.mp3\u0022 preload=\u0022auto\u0022 autoplay\u003E\u003Ctrack kind=\u0022captions\u0022\u003E\u003C/audio\u003E\n\t\u003Caudio bind:this={complete_audio} src=\u0022/hi-metal-tone.mp3\u0022 preload=\u0022auto\u0022\u003E\u003Ctrack kind=\u0022captions\u0022\u003E\u003C/audio\u003E\n = new Audio()\nround_audioround_audio.src  \n\nround_audioround_audio.prelpreload = \u0027auto\u0027// // round_audio = new Audio()\nround_audio.src = \u0022/lo-metal-tone.mp3\u0022\nccoommpplleettee__aauuddiioo\u0022/hi-metal-tone.mp3\u0022// // // \n\ta.play().then(// round_audio\n\t\tround_audioround_audio.volume = 0.01\tmuted = true\tround_audio.muted = true\n\t\t\tround_audio.play().then(\n\t\t\t\t\t() =\u003E {\nfalse\t\t\tround_audio.muted = false\n\t\t\taudio_works = true\n\t\t\tconsole.log(\u0027Audio works\u0027)\n\t\t\t\t},\n\t\t\t\t\t() =\u003E {\n\n\t\t() =\u003E {\t\t\n\t\t},\t\t\t\n\t\t\tconsole.log(\u0027Audio works\u0027)\n\t\t\taudio_works = truetrue\n\t\t() =\u003E {\t\t\n\tround_audio.play().then(\tvolume = 0.01\t\tround_audioround_audiorounround_audio]\n\tconst old_src = round_audioround_audio.asrc\n\t\t\trond_audioround_audio.src = old_old_src\n\t\t\tround_audio.src = old_srcround\tconst round_src = round_audio.src\ncroundccoommpplleettee\tround_audio.src = \u0027/silence.mp3\u0027\n completcomplete_audio.src =\n\t\tcomplete_audiocomplete_audio.play()\trroouunndd__ssrrcc\n\t\t\t\n\t\t\tccoommpplleettee__aauuddiioocomplete_audiocomplete_audio..ssrrcc  ==  ccoommpplleettee__sscomplete_srccomplete_src\n\t// This ugly monstrosity brought to you by iOS Safari. This iseems to tbe the only way to bless the audio objects to be able to play during the game. :/\n\t\u003C/style\u003E\n\t// tT\n\t//  *//* min-\n\tfont-size: 60%;102523 *//* absoluabsolute.53 2em 0:not(:empty):empty *//*  *//* \n\tn2bottomwillstarting...\n\nwindow.onclick = () =\u003E {\n\t\n\t}\tconsoe.le.log(\u0027onclick\u0022\u0027)documenttest_audio()if (!audio)_works) \n\t// \ndocument.onclick = () =\u003E {\n\tif (!audio_works) test_audio()\n}","Pieces":[{"Start":1,"Length":1,"LineBreaks":[]},{"Start":23,"Length":23,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":5,"Length":5,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":19,"Length":19,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":18,"Length":18,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":5,"Length":5,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":6,"Length":6,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":5,"Length":5,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":7,"Length":7,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":5,"Length":5,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":6,"Length":6,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":15,"Length":15,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":5,"Length":5,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":7,"Length":7,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":6,"Length":6,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":5,"Length":5,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":8,"Length":8,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":6,"Length":6,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":5,"Length":5,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":9,"Length":9,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":5,"Length":5,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":6,"Length":6,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":5,"Length":5,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":7,"Length":7,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":5,"Length":5,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":6,"Length":6,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":8,"Length":8,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":5,"Length":5,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":7,"Length":7,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":6,"Length":6,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":5,"Length":5,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":10,"Length":10,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":11,"Length":11,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":12,"Length":12,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":13,"Length":13,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":14,"Length":14,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":16,"Length":16,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":17,"Length":17,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":20,"Length":20,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":5,"Length":5,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":21,"Length":21,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":6,"Length":6,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":5,"Length":5,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":7,"Length":7,"LineBreaks":[]},{"Start":5,"Length":5,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":22,"Length":22,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":5,"Length":5,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":6,"Length":6,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":5,"Length":5,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":7,"Length":7,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":5,"Length":5,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":24,"Length":24,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":5,"Length":5,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":6,"Length":6,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":7,"Length":7,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":5,"Length":5,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":8,"Length":8,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":5,"Length":5,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":6,"Length":6,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":7,"Length":7,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":9,"Length":9,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":7,"Length":7,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":5,"Length":5,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":6,"Length":6,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":5,"Length":5,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":10,"Length":10,"LineBreaks":[]},{"Start":11,"Length":11,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":5,"Length":5,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":6,"Length":6,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":5,"Length":5,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":7,"Length":7,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":5,"Length":5,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":6,"Length":6,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":5,"Length":5,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":9,"Length":9,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":6,"Length":6,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":5,"Length":5,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":7,"Length":7,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":5,"Length":5,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":6,"Length":6,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":5,"Length":5,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":8,"Length":8,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":5,"Length":5,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":6,"Length":6,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":5,"Length":5,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":7,"Length":7,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":5,"Length":5,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":6,"Length":6,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":5,"Length":5,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":10,"Length":10,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":5,"Length":5,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":6,"Length":6,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":5,"Length":5,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":7,"Length":7,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":5,"Length":5,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":9,"Length":9,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":5,"Length":5,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":6,"Length":6,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":5,"Length":5,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":8,"Length":8,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":5,"Length":5,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":6,"Length":6,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":5,"Length":5,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":4,"Length":4,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":7,"Length":7,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":2,"Length":2,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":3,"Length":3,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]},{"Start":25,"Length":25,"LineBreaks":[]},{"Start":1,"Length":1,"LineBreaks":[]}],"UndoStack":[],"RedoStack":[]}